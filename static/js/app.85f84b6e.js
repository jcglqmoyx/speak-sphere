(function(){"use strict";var e={2630:function(e,a,t){var l=t(5130),o=t(6768),n=(t(1397),t(1862),t(144)),u=(t(4188),t(4975)),r=(t(4114),t(782)),d=t(1387),i={__name:"LoginAndLogoutMenuItem",setup(e){const a=(0,r.Pj)(),t=(0,d.rd)(),l=async()=>{await t.push({name:"login"})},i=async()=>{await a.dispatch("logout"),await t.push({name:"login"})};return(e,t)=>(0,n.R1)(a).state.user.isAuthenticated?((0,o.uX)(),(0,o.Wv)((0,n.R1)(u.ct),{key:0,index:"4",onClick:i},{default:(0,o.k6)(()=>[(0,o.eW)("退出登录")]),_:1})):((0,o.uX)(),(0,o.Wv)((0,n.R1)(u.ct),{key:1,index:"4",onClick:l},{default:(0,o.k6)(()=>[(0,o.eW)("登录")]),_:1}))}};const c=i;var s=c,m={__name:"NavBar",setup(e){const a=(0,n.KR)("4"),t=(0,r.Pj)();t.state.user.isAuthenticated&&(a.value="1");const l=()=>{window.open("https://www.zhihu.com/question/309418216/answer/1965169328514109501","_blank")},d=()=>{window.open("https://stackedit.io/app#","_blank")};return(e,t)=>{const r=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.Wv)((0,n.R1)(u.lj),{"default-active":a.value,class:"el-menu-demo",mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},{default:(0,o.k6)(()=>[(0,o.bF)(r,{to:{name:"word"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(u.ct),{index:"1"},{title:(0,o.k6)(()=>[(0,o.eW)("单词")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(u.$b),{index:"2"},{title:(0,o.k6)(()=>[(0,o.eW)("设置")]),default:(0,o.k6)(()=>[(0,o.bF)(r,{to:{name:"book_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(u.ct),{index:"2-1"},{default:(0,o.k6)(()=>[(0,o.eW)("词书设置")]),_:1})]),_:1}),(0,o.bF)(r,{to:{name:"dictionary_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(u.ct),{index:"2-2"},{default:(0,o.k6)(()=>[(0,o.eW)("词典设置")]),_:1})]),_:1}),(0,o.bF)(r,{to:{name:"user_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(u.ct),{index:"2-3"},{default:(0,o.k6)(()=>[(0,o.eW)("用户设置")]),_:1})]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(u.$b),{index:"3"},{title:(0,o.k6)(()=>[(0,o.eW)("工具")]),default:(0,o.k6)(()=>[(0,o.bF)(r,{to:{name:"record"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(u.ct),{index:"3-1"},{default:(0,o.k6)(()=>[(0,o.eW)(" 口语录音 ")]),_:1})]),_:1}),(0,o.bF)(r,{to:{name:"query"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(u.ct),{index:"3-2"},{title:(0,o.k6)(()=>[(0,o.eW)("查询单词")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(u.ct),{index:"3-3",onClick:d},{default:(0,o.k6)(()=>[(0,o.eW)(" 在线Markdown渲染 ")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(u.ct),{index:"4",onClick:l},{default:(0,o.k6)(()=>[(0,o.eW)(" 帮助 ")]),_:1}),(0,o.bF)(s)]),_:1},8,["default-active"])}}},p=t(1241);const v=(0,p.A)(m,[["__scopeId","data-v-0bc38be5"]]);var k=v,f=t(7383),R=t(153);const b=()=>{const e=(0,f.C6J)({storageKey:"speak-sphere-theme",valueDark:"dark",valueLight:"light"}),a=(0,R.eY)(e),t=()=>{const a=localStorage.getItem("speak-sphere-theme");a||(e.value=window.matchMedia("(prefers-color-scheme: dark)").matches)};return{isDark:e,toggleDark:a,initTheme:t}};let _=null;const g=()=>(_||(_=b(),_.initTheme()),_);var y={__name:"App",setup(e){return g(),(e,a)=>{const t=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(k),(0,o.bF)(t)],64)}}};const h=y;var F=h,w=t(4232),V=t(683),S=t(1702);const K={class:"content-area"};function W(e,a){return(0,o.uX)(),(0,o.CE)("div",K,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])}const C={},x=(0,p.A)(C,[["render",W],["__scopeId","data-v-6a9f74f6"]]);var L=x,E=t(4373);const I={class:"buttons"};var A={__name:"WordModuleView",setup(e){const a=(0,n.KR)(""),t=(0,n.KR)(!1);(0,o.sV)(async()=>{t.value=!1;const e="https://api.unsplash.com/photos/random?client_id=dow523p27APOI8KgcFO0XXCZ2GUv_E1Xhf6iJ0z4XDA";let l=localStorage.getItem("homepage_image_url");null==l&&await E.A.get(e).then(e=>{l=e.data.urls.regular,localStorage.setItem("homepage_image_url",l)}).catch(e=>{console.error("Error fetching image:",e)}),a.value=l,t.value=!0});const l=(0,d.rd)(),u=()=>{l.push("/review")},r=()=>{l.push("/learn")};return(e,l)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[t.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(V.Ik),{key:0,class:"card"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"image-wrapper",style:(0,w.Tr)({backgroundImage:"url("+a.value+")"})},[(0,o.Lk)("div",I,[(0,o.bF)((0,n.R1)(S.S2),{text:"",class:"button",onClick:u},{default:(0,o.k6)(()=>[(0,o.eW)("Review")]),_:1}),(0,o.bF)((0,n.R1)(S.S2),{text:"",class:"button",onClick:r},{default:(0,o.k6)(()=>[(0,o.eW)("Learn")]),_:1})])],4)]),_:1})):(0,o.Q3)("",!0)]),_:1}))}};const U=(0,p.A)(A,[["__scopeId","data-v-1b73028c"]]);var j=U,X=t(5812),z=t(813),T=t(9385),M=t(8165),$=t(2462),B=t(1040),Q=t(7477),q=t(1451),D=t.n(q);async function P(){try{const e=localStorage.getItem("server_link"),a=localStorage.getItem("token"),t=e+"/user/profile",l=await E.A.get(t,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return console.log(l.data.data),l.data.data}catch(e){console.error("Error fetching data from backend:",e)}}async function O(){try{const e=localStorage.getItem("server_link"),a=localStorage.getItem("token"),t=await E.A.get(e+"/dictionary/list",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return t.data}catch(e){console.error("Error fetching data from backend:",e)}}async function Z(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=await E.A.get(a+"/entry/"+e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return l.data}catch(a){console.error("Error fetching data from backend:",a)}}async function Y(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=await E.A.get(a+"/entry/count/"+e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return l.data}catch(a){console.error("Error fetching data from backend:",a)}}async function H(e,a,t){try{const l=localStorage.getItem("server_link"),o=localStorage.getItem("token"),n=await E.A.get(l+"/entry/list?book_id="+e+"&pageSize="+a+"&currentPage="+t,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return n.data}catch(l){console.error("Error fetching data from backend:",l)}}async function J(e,a,t,l,o,n,u,r,d){try{const i=localStorage.getItem("token"),c=localStorage.getItem("server_link"),s=c+"/entry/update";console.log(e,a,t,l,o,r,d);const m=await E.A.put(s,{id:e,word:a,meaning:t,book_id:l,note:o,unwanted:n,study_count:u,date_to_review:r,created_at:d},{headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});return m.data}catch(i){console.error("Error fetching data from backend:",i)}}async function G(e){try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/entry/update/unwanted/"+e,o=await E.A.put(l,null,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}async function N(e){try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/entry/update/study/count/"+e,o=await E.A.put(l,null,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}async function ee(e){try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/entry/update/reset/"+e,o=await E.A.put(l,null,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}var ae=t(539),te=t(2464),le=t(6697),oe=t(9782),ne=t(9084),ue=t(9982),re=t(5686),de=t.n(re),ie=t(437);const ce=e=>((0,o.Qi)("data-v-c77dbee8"),e=e(),(0,o.jt)(),e),se=ce(()=>(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css",crossorigin:"anonymous"},null,-1)),me={key:0,class:"word-card"},pe={class:"header"},ve={class:"word"},ke={key:0,class:"word"},fe={class:"footer"},Re={key:1,class:"word-card"},be=ce(()=>(0,o.Lk)("h1",{class:"word"},"Loading data...",-1)),_e=[be],ge={key:2,class:"word-card"},ye=ce(()=>(0,o.Lk)("h1",{class:"word"},"当前任务已完成",-1)),he=[ye],Fe=["href"],we={class:"note-editor"},Ve=["innerHTML"],Se={class:"editor-actions"};var Ke={__name:"WordCardView",props:["type"],setup(e){const a=e,t=(0,n.KR)(2),l=(0,n.KR)(!0),u=(0,n.KR)(!1),d=(0,n.KR)(!1),i=(0,n.KR)("edit"),c=new(D())({html:!0,linkify:!0,typographer:!0,tables:!0}).use(ae.A).use(te.A).use(le.A).use(oe.A).use(ne.A).use(ue.A).use(de(),{engine:ie.Ay,delimiters:"dollars",katexOptions:{macros:{"\\RR":"\\mathbb{R}"}}}),s=()=>{C(),i.value="edit",d.value=!d.value},m=(0,o.EW)(()=>W.value?c.render(W.value):'<p class="empty-note">暂无笔记内容</p>');let p=(0,n.Kh)([]),v=(0,n.Kh)([]),k=(0,n.KR)(0),f={};const R=(0,n.KR)(0),b=(0,n.KR)(1),_=e=>{if(null==e||2===e.code){const e=(0,r.Pj)();e.dispatch("logout"),location.reload()}};(0,o.sV)(async()=>{const e=await Z(a.type);if(_(e),v=e.data,null==v||0===v.length)return void(t.value=3);t.value=1;for(let a=0;a<v.length;a++)f[a]=0;const l=await O();_(l),p=l.data;const o=await P();_(o),R.value=o.times_counted_as_known});const g=async e=>{if(!d.value)if("0123456789".includes(e.key)){let a=+e.key;0===a&&(a=10),a<=p.length&&window.open(p[a-1].prefix+v[k.value].word+(p[a-1].suffix||""),"_blank")}else if("s"===e.key)u.value=!u.value;else if("n"===e.key){if(2!==b.value&&3!==b.value)return!0;await K()}else if("u"===e.key){if(2!==b.value)return!0;await V()}else if("j"===e.key){if(1!==b.value)return!0;await F()}else if("k"===e.key){if(1!==b.value)return!0;await h()}else{if("d"!==e.key&&"D"!==e.key)return!0;await y()}},y=async()=>{f[k.value]=R.value;const e=await G(v[k.value].id);_(e),await K()},h=async()=>{f[k.value]=0;const e=await ee(v[k.value].id);_(e),b.value=3},F=async()=>{if(f[k.value]++,f[k.value]>=R.value){const e=await N(v[k.value].id);_(e)}b.value=2},V=async()=>{f[k.value]=0;const e=await ee(v[k.value].id);_(e),await K()},K=async()=>{let e=k.value;do{e=(e+1)%v.length}while(e!==k.value&&f[e]>=R.value);e===k.value&&f[e]>=R.value?t.value=3:(b.value=1,k.value=e)};let W=(0,n.KR)("");const C=()=>{W.value=v[k.value].note},x=async()=>{const e=await J(v[k.value].id,v[k.value].word,v[k.value].meaning,v[k.value].book_id,W.value,v[k.value].unwanted,v[k.value].study_count,v[k.value].date_to_review,v[k.value].created_at);_(e)};return(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(L,{onKeydown:g,tabindex:"0"},{default:(0,o.k6)(()=>[se,1===t.value?((0,o.uX)(),(0,o.CE)("div",me,[(0,o.Lk)("div",pe,[(0,o.bF)((0,n.R1)(X.R7),{content:"搜索单词 (快捷键: S)",placement:"top"},{default:(0,o.k6)(()=>[l.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,class:"centered-button",circle:"",onClick:a[0]||(a[0]=e=>u.value=!u.value)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(z.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(z.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Q.vji))]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.eW)("   "),(0,o.bF)((0,n.R1)(X.R7),{content:"编辑笔记 (支持Markdown语法)",placement:"top"},{default:(0,o.k6)(()=>[l.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,class:"centered-button",circle:"",onClick:s},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(z.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Q.EDh))]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.eW)("   "),(0,o.bF)((0,n.R1)(X.R7),{content:"标记为不想学 (快捷键: D)",placement:"top"},{default:(0,o.k6)(()=>[l.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,class:"centered-button",circle:"",onClick:y},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(z.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Q.epd))]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1})]),(0,o.Lk)("div",null,[(0,o.Lk)("div",ve,(0,w.v_)((0,n.R1)(v)[(0,n.R1)(k)].word),1),2===b.value||3===b.value?((0,o.uX)(),(0,o.CE)("div",ke,(0,w.v_)((0,n.R1)(v)[(0,n.R1)(k)].meaning),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",fe,[(0,o.bF)((0,n.R1)(X.R7),{content:"认识 (快捷键: J)",placement:"top"},{default:(0,o.k6)(()=>[1===b.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,onClick:F},{default:(0,o.k6)(()=>[(0,o.eW)("认识")]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"不认识 (快捷键: K)",placement:"top"},{default:(0,o.k6)(()=>[1===b.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,onClick:h},{default:(0,o.k6)(()=>[(0,o.eW)("不认识")]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"记错了 (快捷键: U)",placement:"top"},{default:(0,o.k6)(()=>[2===b.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,onClick:V},{default:(0,o.k6)(()=>[(0,o.eW)("记错了")]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"下一词 (快捷键: N)",placement:"top"},{default:(0,o.k6)(()=>[2===b.value||3===b.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(S.S2),{key:0,onClick:K},{default:(0,o.k6)(()=>[(0,o.eW)("下一词")]),_:1})):(0,o.Q3)("",!0)]),_:1})])])):2===t.value?((0,o.uX)(),(0,o.CE)("div",Re,_e)):3===t.value?((0,o.uX)(),(0,o.CE)("div",ge,he)):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(T.pw),{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),title:"搜索","with-header":!0},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,n.R1)(p),(e,a)=>((0,o.uX)(),(0,o.CE)("p",{key:e.id},[(0,o.Lk)("a",{href:e.prefix+(0,n.R1)(v)[(0,n.R1)(k)].word+(e.suffix||""),target:"_blank"},[(0,o.Lk)("b",null,(0,w.v_)(a+1)+". "+(0,w.v_)(e.title),1)],8,Fe),(0,o.bF)((0,n.R1)(M.fR))]))),128))]),_:1},8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(T.pw),{modelValue:d.value,"onUpdate:modelValue":a[5]||(a[5]=e=>d.value=e),title:"笔记 (支持Markdown语法，包括数学公式和表格)","with-header":!0,size:"50%"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",we,[(0,o.bF)((0,n.R1)($.q),{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=e=>i.value=e),type:"border-card"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)($.v$),{label:"编辑",name:"edit"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"textarea",placeholder:"添加笔记 (支持Markdown语法，包括数学公式: $E=mc^2$ 和表格)",modelValue:(0,n.R1)(W),"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.i9)(W)?W.value=e:W=e),rows:20,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)($.v$),{label:"预览",name:"preview"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"markdown-preview",innerHTML:m.value},null,8,Ve)]),_:1})]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(M.fR)),(0,o.Lk)("div",Se,[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:x},{default:(0,o.k6)(()=>[(0,o.eW)("保存")]),_:1}),(0,o.bF)((0,n.R1)(S.S2),{onClick:a[4]||(a[4]=e=>d.value=!1)},{default:(0,o.k6)(()=>[(0,o.eW)("取消")]),_:1})])])]),_:1},8,["modelValue"])],64))}};const We=(0,p.A)(Ke,[["__scopeId","data-v-c77dbee8"]]);var Ce=We,xe={__name:"LearnWordView",setup(e){return(e,a)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[(0,o.bF)(Ce,{type:"learn"})]),_:1}))}};const Le=xe;var Ee=Le,Ie={__name:"ReviewWordView",setup(e){return(e,a)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[(0,o.bF)(Ce,{type:"review"})]),_:1}))}};const Ae=Ie;var Ue=Ae;const je=[{path:"/word",name:"word",component:j,meta:{requiresAuth:!0}},{path:"/card",name:"card",component:Ce,meta:{requiresAuth:!0}},{path:"/learn",name:"learn",component:Ee,meta:{requiresAuth:!0}},{path:"/review",name:"review",component:Ue,meta:{requiresAuth:!0}}];var Xe=je,ze=t(2006);const Te={class:"login-container"},Me={key:0,style:{color:"red","margin-bottom":"10px","margin-left":"100px"}};var $e={__name:"LoginView",setup(e){const a=(0,n.KR)("http://127.0.0.1:8080");null!==localStorage.getItem("server_link")&&(a.value=localStorage.getItem("server_link"));const t=(0,n.KR)(""),u=(0,n.KR)(""),i=(0,n.KR)(!1),c=(0,n.KR)(""),s=(0,r.Pj)(),m=(0,d.rd)(),p=async()=>{const e=await s.dispatch("login",{serverLink:a.value,username:t.value,password:u.value});!0===e?(i.value=!1,await m.push({name:"home"})):(i.value=!0,c.value=e)},v=async()=>{await m.push({name:"register"})};return(e,r)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",Te,[(0,o.bF)((0,n.R1)(ze.US),{ref:"loginForm","label-width":"80px"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"Server Link",prop:"serverLink",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:a.value,"onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e),placeholder:"请输入服务器地址"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"Username",prop:"username",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=e=>t.value=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"Password",prop:"password",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"password",modelValue:u.value,"onUpdate:modelValue":r[2]||(r[2]=e=>u.value=e),onKeyup:(0,l.jR)(p,["enter"]),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),i.value?((0,o.uX)(),(0,o.CE)("div",Me,(0,w.v_)(c.value),1)):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(ze.xE),{class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:p,class:"login-button"},{default:(0,o.k6)(()=>[(0,o.eW)("Login")]),_:1})]),_:1}),(0,o.Lk)("p",{onClick:v,style:{"margin-left":"80px",color:"#0477fa"}},"没有账号？点击注册")]),_:1},512)])]),_:1}))}};const Be=(0,p.A)($e,[["__scopeId","data-v-39c5c546"]]);var Qe=Be;const qe={class:"register-container"},De={key:0,style:{color:"red","margin-bottom":"10px","margin-left":"100px"}},Pe={key:2,style:{"margin-left":"80px",color:"#0477fa"}};var Oe={__name:"RegisterView",setup(e){const a=(0,r.Pj)(),t=(0,n.KR)("http://127.0.0.1:8080"),u=(0,n.KR)(""),i=(0,n.KR)(""),c=(0,n.KR)(""),s=(0,n.KR)(""),m=(0,n.KR)(""),p=(0,n.KR)(!1),v=(0,n.KR)(""),k=(0,n.KR)(!1),f=(0,n.KR)(""),R=async()=>{if(s.value!==m.value)return p.value=!0,void(v.value="两次输入的密码不一致");const e=await a.dispatch("register",{serverLink:t.value,username:u.value,email:i.value,avatar:c.value,password:s.value,confirm_password:m.value});!0===e?(p.value=!1,k.value=!0,f.value="注册成功, 即将自动跳转到登录页面",setTimeout(()=>{_()},2e3)):(p.value=!0,v.value=e)},b=(0,d.rd)(),_=()=>{b.push({name:"login"})};return(e,a)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",qe,[(0,o.bF)((0,n.R1)(ze.US),{ref:"registerForm","label-width":"80px"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"服务器",prop:"serverLink",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"请输入后台服务器地址"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"用户名",prop:"username",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=e=>u.value=e),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"邮箱",prop:"email",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:i.value,"onUpdate:modelValue":a[2]||(a[2]=e=>i.value=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"头像",prop:"avatar",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"密码",prop:"password",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"password",modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=e=>s.value=e),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"确认密码",prop:"confirmPassword",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"password",modelValue:m.value,"onUpdate:modelValue":a[5]||(a[5]=e=>m.value=e),onKeyup:(0,l.jR)(R,["enter"]),placeholder:"请确认密码"},null,8,["modelValue"])]),_:1}),p.value?((0,o.uX)(),(0,o.CE)("div",De,(0,w.v_)(v.value),1)):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(ze.xE),{class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:R,class:"register-button"},{default:(0,o.k6)(()=>[(0,o.eW)("注册")]),_:1})]),_:1}),k.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",{key:1,onClick:_,style:{"margin-left":"80px",color:"#04eefa"}},"已有账号？点击登录")),k.value?((0,o.uX)(),(0,o.CE)("p",Pe,(0,w.v_)(f.value),1)):(0,o.Q3)("",!0)]),_:1},512)])]),_:1}))}};const Ze=(0,p.A)(Oe,[["__scopeId","data-v-c4712e08"]]);var Ye=Ze;const He=[{path:"/login",name:"login",component:Qe,beforeEnter:(e,a,t)=>{t(e=>{e.$nextTick(()=>{e.$refs.loginMenuItem.focus()})})}},{path:"/register",name:"register",component:Ye}];var Je=He,Ge=t(3851),Ne=t(236),ea=t(4880),aa=t(6844),ta=t(132),la=t(5475),oa=t(850),na=t(8430);async function ua(){try{const e=localStorage.getItem("server_link"),a=localStorage.getItem("token"),t=await E.A.get(e+"/book/count",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return t.data}catch(e){console.error("Error fetching data from backend:",e)}}async function ra(e,a){try{const t=localStorage.getItem("server_link"),l=localStorage.getItem("token"),o=t+"/book/list/"+e+"/"+a,n=await E.A.get(o,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});return n.data}catch(t){console.error("Error fetching data from backend:",t)}}function da(e){return"text/plain"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type?e.size>10485760?{code:1,message:"文件大小不能超过10M"}:{code:0,message:"success"}:{code:1,message:"文件格式错误"}}async function ia(e,a,t,l){try{const o=localStorage.getItem("token"),n=localStorage.getItem("server_link"),u=n+"/book/update",r=await E.A.put(u,{id:e,title:a,category:t,created_at:l},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return r.data}catch(o){console.error("Error fetching data from backend:",o)}}async function ca(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=a+"/book/delete/"+e,o=await E.A.delete(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}var sa=t(1576),ma=t.n(sa);const pa=e=>{const a=e["date_to_review"].toString();return a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6)},va=(e,a)=>ma()(e[a.property]).format("YYYY-MM-DD HH:mm:ss");async function ka(e,a){try{const t=localStorage.getItem("token"),l=localStorage.getItem("server_link"),o=l+"/book/add",n=await E.A.post(o,{title:e,category:a},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return n.data}catch(t){console.error("Error fetching data from backend:",t)}}const fa=e=>((0,o.Qi)("data-v-3942a60d"),e=e(),(0,o.jt)(),e),Ra=fa(()=>(0,o.Lk)("br",null,null,-1)),ba={class:"dialog-footer"},_a=fa(()=>(0,o.Lk)("div",{style:{color:"red"}}," 一次只能上传一个.txt文件或者.xlsx文件，词条数不能超过50万个 ",-1)),ga={class:"dialog-footer"};var ya={__name:"BookSettingView",setup(e){const a=(0,r.Pj)(),t=e=>{null!=e&&2!==e.code||(a.dispatch("logout"),location.reload())};let u=(0,n.KR)(!1),d=(0,n.KR)(null),i=(0,n.Kh)([]),c=(0,n.KR)(5),s=(0,n.KR)(1);const m=async()=>{v.value=!1;const e=await ra(c.value,s.value);t(e),i=e.data,v.value=!0},p=async()=>{v.value=!1;const e=await ra(c.value,s.value);t(e),i=e.data,v.value=!0},v=(0,n.KR)(!1);let k=(0,n.KR)(0);(0,o.sV)(async()=>{const e=await ua();t(e),k.value=e.data;const a=await ra(c.value,s.value);t(a),i=a.data,v.value=!0});const f=e=>{localStorage.setItem("book_id",e.id),Mt.push({name:"word_setting"})},R=e=>{d.value=e,u.value=!0},b=()=>{u.value=!1,location.reload()},_=async()=>{u.value=!1,v.value=!1;const e=await ia(d.value.id,d.value.title,d.value.category,d.value.created_at);t(e),v.value=!0,location.reload()},g=async e=>{(0,Ge.df)({title:"删除词书",message:"词书删除中, 请稍等...",type:"info",duration:1e3});const a=await ca(e.id);if(t(a),0===a.code){v.value=!1;const e=await ua();t(e),k.value=e.data;const a=await ra(c.value,s.value);t(a),i=a.data,v.value=!0,(0,Ge.df)({title:"Success",message:"删除成功",type:"success",duration:1e3})}},y=(0,n.KR)(!1),h=(0,n.Kh)({title:"",category:""}),F=()=>{y.value=!0},w=(0,n.KR)(!1),V=(0,n.KR)(null),K=e=>{V.value.clearFiles();const a=e[0];a.uid=(0,Ne.G$)(),V.value.handleStart(a)},W=e=>{1===e.code?(0,Ge.df)({title:"上传失败",message:e.message,type:"error",duration:1e3}):(0,Ge.df)({title:"Success",message:e.message,type:"success",duration:1e3}),setTimeout(()=>{location.reload()},1e3)},C=e=>{(0,Ge.df)({title:"Error",message:e.message,type:"error",duration:1e3})},x=()=>{w.value=!1,y.value=!1,h.title="",h.category=""},E=async()=>{if((0,Ge.df)({title:"文件上传",message:"词书上传中, 请稍等...",type:"info",duration:1e3}),y.value=!1,w.value=!1,v.value=!1,null!=V.value)V.value.submit();else{const e=await ka(h.title,h.category);t(e),0===e.code?(0,Ge.df)({title:"Success",message:"添加成功",type:"success",duration:1e3}):C(e)}const e=await ua();t(e),k.value=e.data.data;const a=await ra(c.value,s.value);t(a),i=a.data,v.value=!0,h.title="",h.category=""},I=localStorage.getItem("server_link"),A=(0,n.KR)(I+"/book/add"),U=(0,n.KR)({Authorization:"Bearer "+localStorage.getItem("token")}),j=e=>{const a=da(e);return 0===a.code||((0,Ge.df)({title:"Error",message:a.message,type:"error",duration:1e3}),!1)};return(e,a)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[v.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(ea.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ea.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(aa.Up),{data:(0,n.R1)(i)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(aa.o8),{label:"名称",prop:"title"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"分类",prop:"category"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"创建时间",prop:"created_at",formatter:(0,n.R1)(va)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"更新时间",prop:"updated_at",formatter:(0,n.R1)(va)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"操作"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>f(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("查看词汇")]),_:2},1032,["onClick"]),(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>R(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("编辑")]),_:2},1032,["onClick"]),(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>g(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),(0,o.Lk)("div",null,[(0,o.bF)((0,n.R1)(ta.aQ),{"current-page":(0,n.R1)(s),"onUpdate:currentPage":a[0]||(a[0]=e=>(0,n.i9)(s)?s.value=e:s=e),"page-size":(0,n.R1)(c),"onUpdate:pageSize":a[1]||(a[1]=e=>(0,n.i9)(c)?c.value=e:c=e),"page-sizes":[5,10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(k),onSizeChange:p,onCurrentChange:m},null,8,["current-page","page-size","total"])])]),_:1}),Ra,(0,o.bF)((0,n.R1)(ea.LK),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:F},{default:(0,o.k6)(()=>[(0,o.eW)("添加")]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:(0,n.R1)(u),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,n.i9)(u)?u.value=e:u=e),title:"编辑词书"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",ba,[(0,o.bF)((0,n.R1)(S.S2),{onClick:b},{default:(0,o.k6)(()=>[(0,o.eW)("取消")]),_:1}),(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:_},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:(0,n.R1)(d)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"标题"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(d).title,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.R1)(d).title=e),onKeyup:(0,l.jR)(_,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"分类"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(d).category,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.R1)(d).category=e),onKeyup:(0,l.jR)(_,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:y.value,"onUpdate:modelValue":a[8]||(a[8]=e=>y.value=e),title:"新建词书"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",ga,[(0,o.bF)((0,n.R1)(S.S2),{onClick:x},{default:(0,o.k6)(()=>[(0,o.eW)("Cancel")]),_:1}),(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:E},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:h},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"标题"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:h.title,"onUpdate:modelValue":a[5]||(a[5]=e=>h.title=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"分类"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:h.category,"onUpdate:modelValue":a[6]||(a[6]=e=>h.category=e),onKeyup:(0,l.jR)(E,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(oa.dI),{modelValue:w.value,"onUpdate:modelValue":a[7]||(a[7]=e=>w.value=e)},{default:(0,o.k6)(()=>[(0,o.eW)("上传文件(如不上传文件，则创建一个空的词书)")]),_:1},8,["modelValue"]),w.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(ze.xE),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(na.j5),{ref_key:"upload",ref:V,"before-upload":j,action:A.value,headers:U.value,data:{title:h.title,category:h.category},name:"file",limit:1,"on-exceed":K,"auto-upload":!1,"on-success":W},{trigger:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary"},{default:(0,o.k6)(()=>[(0,o.eW)("选择文件")]),_:1})]),tip:(0,o.k6)(()=>[_a]),_:1},8,["action","headers","data"])]),_:1})):(0,o.Q3)("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const ha=(0,p.A)(ya,[["__scopeId","data-v-3942a60d"]]);var Fa=ha,wa=t(1418),Va=t(3883);async function Sa(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=a+"/entry/delete/"+e,o=await E.A.delete(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}async function Ka(e,a,t,l){try{const o=localStorage.getItem("token"),n=localStorage.getItem("server_link"),u=n+"/entry/add",r=await E.A.post(u,{book_id:e,word:a,meaning:t,note:l},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return r.data}catch(o){console.error("Error fetching data from backend:",o)}}const Wa=(0,o.Lk)("br",null,null,-1),Ca={class:"block"},xa={class:"dialog-footer"},La={class:"dialog-footer"};var Ea={__name:"WordSettingView",setup(e){const a=parseInt(localStorage.getItem("book_id"));let t=(0,n.Kh)([]),u=(0,n.KR)(5),d=(0,n.KR)(1);const i=(0,r.Pj)(),c=e=>{null!=e&&2!==e.code||(i.dispatch("logout"),location.reload())},s=(0,n.KR)(!1);let m=(0,n.KR)(0);(0,o.sV)(async()=>{const e=await Y(a);c(e),m.value=e.data;const l=await H(a,u.value,d.value);c(l),t=l.data,s.value=!0});const p=async()=>{s.value=!1;const e=await H(a,u.value,d.value);c(e),t=e.data,s.value=!0},v=async()=>{s.value=!1;const e=await H(a,u.value,d.value);c(e),t=e.data,s.value=!0},k=(0,n.KR)(null),f=(0,n.KR)(!1),R=async e=>{(0,Ge.df)({title:"删除条目",message:"条目删除中, 请稍等...",type:"info",duration:1e3});const l=await Sa(e.id);if(c(l),0===l.code){s.value=!1;const e=await Y(a);c(e),m.value=e.data;const l=await H(a,u.value,d.value);c(l),t=l.data,s.value=!0,(0,Ge.df)({title:"Success",message:"删除成功",type:"success",duration:1e3})}},b=e=>{const a=e.getFullYear();return a<2e3||a>2099},_=(0,n.KR)(0),g=e=>{k.value=e;const a=e.date_to_review,t=Math.floor(a/1e4),l=Math.floor(a%1e4/100)-1,o=a%100,n=new Date(t,l,o);_.value=n.getTime(),f.value=!0},y=()=>{f.value=!1,location.reload()},h=async()=>{f.value=!1,s.value=!1;const e=new Date(_.value),a=e.getFullYear(),t=e.getMonth()+1,l=e.getDate();k.value.date_to_review=1e4*a+100*t+l;const o=await J(k.value.id,k.value.word,k.value.meaning,k.value.book_id,k.value.note,k.value.unwanted,k.value.study_count,k.value.date_to_review,k.value.created_at);c(o),s.value=!0},F=(0,n.KR)(!1),w=()=>{F.value=!0},V=(0,n.Kh)({word:"",meaning:"",note:""}),K=()=>{F.value=!1,V.word="",V.meaning="",V.note=""},W=e=>{(0,Ge.df)({title:"Error",message:e.message,type:"error",duration:1e3})},C=async()=>{F.value=!1,s.value=!1;const e=await Ka(a,V.word,V.meaning,V.note);c(e),0===e.code?(0,Ge.df)({title:"Success",message:"添加成功",type:"success",duration:1e3}):W(e);const l=await Y(a);c(l),m.value=l.data.data;const o=await H(a,u.value,d.value);c(o),t=o.data,s.value=!0,V.word="",V.meaning="",V.note=""};return(e,a)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[s.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(ea.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ea.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(aa.Up),{data:(0,n.R1)(t)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(aa.o8),{label:"单词",prop:"word"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"含义",prop:"meaning"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"备注",prop:"note"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"不想学",prop:"unwanted"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"学习次数",prop:"study_count"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"复习日期",prop:"date_to_review",formatter:(0,n.R1)(pa)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"创建时间",prop:"created_at",formatter:(0,n.R1)(va)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"更新时间",prop:"updated_at",formatter:(0,n.R1)(va)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"操作"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)(X.R7),{content:"编辑单词条目",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>g(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("编辑")]),_:2},1032,["onClick"])]),_:2},1024),(0,o.bF)((0,n.R1)(X.R7),{content:"删除单词条目",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>R(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),(0,o.Lk)("div",null,[(0,o.bF)((0,n.R1)(ta.aQ),{"current-page":(0,n.R1)(d),"onUpdate:currentPage":a[0]||(a[0]=e=>(0,n.i9)(d)?d.value=e:d=e),"page-size":(0,n.R1)(u),"onUpdate:pageSize":a[1]||(a[1]=e=>(0,n.i9)(u)?u.value=e:u=e),"page-sizes":[5,10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(m),onSizeChange:v,onCurrentChange:p},null,8,["current-page","page-size","total"])])]),_:1}),Wa,(0,o.bF)((0,n.R1)(ea.LK),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(X.R7),{content:"添加新单词",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:w},{default:(0,o.k6)(()=>[(0,o.eW)("添加")]),_:1})]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:f.value,"onUpdate:modelValue":a[8]||(a[8]=e=>f.value=e),title:"编辑条目"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",xa,[(0,o.bF)((0,n.R1)(X.R7),{content:"取消编辑",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:y},{default:(0,o.k6)(()=>[(0,o.eW)("取消")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"确认编辑",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:h},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:k.value},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"单词"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:k.value.word,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.word=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"含义"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"textarea",autosize:{minRows:5},modelValue:k.value.meaning,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value.meaning=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"备注"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"textarea",autosize:{minRows:3},modelValue:k.value.note,"onUpdate:modelValue":a[4]||(a[4]=e=>k.value.note=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(oa.dI),{modelValue:k.value.unwanted,"onUpdate:modelValue":a[5]||(a[5]=e=>k.value.unwanted=e),label:"标记为不想学",size:"large"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"学习次数"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(wa.lq),{modelValue:k.value.study_count,"onUpdate:modelValue":a[6]||(a[6]=e=>k.value.study_count=e),min:0,max:30},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"下次复习日期"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",Ca,[(0,o.bF)((0,n.R1)(Va.MG),{modelValue:_.value,"onUpdate:modelValue":a[7]||(a[7]=e=>_.value=e),"disabled-date":b,type:"date",placeholder:"选择日期"},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:F.value,"onUpdate:modelValue":a[12]||(a[12]=e=>F.value=e),title:"新建条目"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",La,[(0,o.bF)((0,n.R1)(X.R7),{content:"取消添加",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:K},{default:(0,o.k6)(()=>[(0,o.eW)("Cancel")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"确认添加 (快捷键: Enter)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:C},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:V},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"单词"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:V.word,"onUpdate:modelValue":a[9]||(a[9]=e=>V.word=e),onKeyup:(0,l.jR)(C,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"含义"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:V.meaning,"onUpdate:modelValue":a[10]||(a[10]=e=>V.meaning=e),onKeyup:(0,l.jR)(C,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"备注"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:V.note,"onUpdate:modelValue":a[11]||(a[11]=e=>V.note=e),onKeyup:(0,l.jR)(C,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const Ia=Ea;var Aa=Ia;async function Ua(e,a,t,l){try{const o=localStorage.getItem("token"),n=localStorage.getItem("server_link"),u=n+"/dictionary/update",r=await E.A.put(u,{id:e,title:a,prefix:t,suffix:l},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return r.data}catch(o){console.error("Error fetching data from backend:",o)}}async function ja(e,a,t){try{const l=localStorage.getItem("token"),o=localStorage.getItem("server_link"),n=o+"/dictionary/add",u=await E.A.post(n,{title:e,prefix:a,suffix:t},{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});return u.data}catch(l){console.error("Error fetching data from backend:",l)}}async function Xa(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=a+"/dictionary/delete/"+e,o=await E.A.delete(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}const za=(0,o.Lk)("br",null,null,-1),Ta={class:"dialog-footer"},Ma={class:"dialog-footer"};var $a={__name:"DictionarySettingView",setup(e){let a=(0,n.Kh)([]);const t=(0,r.Pj)(),u=e=>{null!=e&&2!==e.code||(t.dispatch("logout"),location.reload())},d=(0,n.KR)(!1);(0,o.sV)(async()=>{const e=await O();u(e),a=e.data,d.value=!0});const i=(0,n.KR)(null),c=(0,n.KR)(!1),s=async e=>{(0,Ge.df)({title:"删除词典",message:"词典删除中, 请稍等...",type:"info",duration:1e3});const t=await Xa(e.id);if(u(t),0===t.code){d.value=!1;const e=await O();u(e),a=e.data,d.value=!0,(0,Ge.df)({title:"Success",message:"删除成功",type:"success",duration:1e3})}},m=e=>{i.value=e,c.value=!0},p=()=>{c.value=!1,location.reload()},v=async()=>{c.value=!1,d.value=!1;const e=await Ua(i.value.id,i.value.title,i.value.prefix,i.value.suffix);u(e),d.value=!0},k=(0,n.KR)(!1),f=()=>{k.value=!0},R=(0,n.Kh)({title:"",prefix:"",suffix:""}),b=()=>{k.value=!1,R.title="",R.prefix="",R.suffix=""},_=e=>{(0,Ge.df)({title:"Error",message:e.message,type:"error",duration:1e3})},g=async()=>{k.value=!1,d.value=!1;const e=await ja(R.title,R.prefix,R.suffix);u(e),0===e.code?(0,Ge.df)({title:"Success",message:"添加成功",type:"success",duration:1e3}):_(e);const t=await O();u(t),a=t.data,d.value=!0,R.title="",R.prefix="",R.suffix=""};return(e,t)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[d.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(ea.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ea.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(aa.Up),{data:(0,n.R1)(a)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(aa.o8),{label:"名称",prop:"title"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"前缀",prop:"prefix"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"后缀",prop:"suffix"}),(0,o.bF)((0,n.R1)(aa.o8),{label:"创建时间",prop:"created_at",formatter:(0,n.R1)(va)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"更新时间",prop:"updated_at",formatter:(0,n.R1)(va)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(aa.o8),{label:"操作"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)(X.R7),{content:"编辑词典",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>m(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("编辑")]),_:2},1032,["onClick"])]),_:2},1024),(0,o.bF)((0,n.R1)(X.R7),{content:"删除词典",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:a=>s(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),za,(0,o.bF)((0,n.R1)(ea.LK),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(X.R7),{content:"添加新词典",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:f},{default:(0,o.k6)(()=>[(0,o.eW)("添加")]),_:1})]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),title:"编辑词典"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Ta,[(0,o.bF)((0,n.R1)(X.R7),{content:"取消编辑",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:p},{default:(0,o.k6)(()=>[(0,o.eW)("取消")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"确认编辑 (快捷键: Enter)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:v},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:i.value},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"名称"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:i.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value.title=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"前缀"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:i.value.prefix,"onUpdate:modelValue":t[1]||(t[1]=e=>i.value.prefix=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"后缀"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:i.value.suffix,"onUpdate:modelValue":t[2]||(t[2]=e=>i.value.suffix=e),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=e=>k.value=e),title:"添加词典"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Ma,[(0,o.bF)((0,n.R1)(X.R7),{content:"取消添加",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:b},{default:(0,o.k6)(()=>[(0,o.eW)("Cancel")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"确认添加 (快捷键: Enter)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:g},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:R},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"名称"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:R.title,"onUpdate:modelValue":t[4]||(t[4]=e=>R.title=e),onKeyup:(0,l.jR)(g,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"前缀"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:R.prefix,"onUpdate:modelValue":t[5]||(t[5]=e=>R.prefix=e),onKeyup:(0,l.jR)(g,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"后缀"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:R.suffix,"onUpdate:modelValue":t[6]||(t[6]=e=>R.suffix=e),onKeyup:(0,l.jR)(g,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const Ba=$a;var Qa=Ba,qa=t(167),Da=t(4418),Pa=t(7962),Oa=t(2357),Za=t(3802),Ya=t(3275);async function Ha(e,a,t,l,o,n,u,r,d,i){try{const c=localStorage.getItem("token"),s=localStorage.getItem("server_link"),m=s+"/user/update",p=await E.A.put(m,{username:e,email:a,avatar:t,current_book_id:l,daily_count:o,times_counted_as_known:n,review_frequency_formula:u,llm_service_provider:r,llm_token:d,llm_model:i},{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});return console.log("更新用户响应:",p.data),p.data}catch(c){return console.error("更新用户时发生错误:",c),c.response&&(console.error("错误响应数据:",c.response.data),console.error("错误状态码:",c.response.status)),c.response?c.response.data:{code:1,message:"网络错误"}}}const Ja={class:"dialog-footer"};var Ga={__name:"UserSettingView",setup(e){let a=(0,n.Kh)([]),t=(0,n.Kh)({id:0,title:""});const l=e=>{for(let l of a)if(l.id===e){t.id=l.id,t.title=l.title,u.currentBookID=l.id;break}};let u=(0,n.Kh)({username:"",email:"",avatar:"",currentBookID:0,dailyCount:0,timesCountedAsKnown:0,reviewFrequencyFormula:"",llmServiceProvider:"",llmToken:"",llmModel:""});const d=(0,r.Pj)(),i=(0,n.KR)(!1),c=e=>{null!=e&&2!==e.code||(d.dispatch("logout"),location.reload())};(0,o.sV)(async()=>{i.value=!1;const e=await P();c(e),u.username=e.username,u.email=e.email,u.avatar=e.avatar,u.currentBookID=e.current_book_id,u.dailyCount=e.daily_count,u.timesCountedAsKnown=e.times_counted_as_known,u.reviewFrequencyFormula=e.review_frequency_formula,u.llmServiceProvider=e.llm_service_provider,u.llmToken=e.llm_token,u.llmModel=e.llm_model;const l=await ra(1e8,1);c(l),a=l.data;for(let o of a)if(o.id===u.currentBookID){t.id=o.id,t.title=o.title;break}i.value=!0});const s=(0,n.KR)(!1),m=()=>{s.value=!0},p=()=>{s.value=!1,location.reload()},v=async()=>{s.value=!1,i.value=!1;const e=await Ha(u.username,u.email,u.avatar,+u.currentBookID,u.dailyCount,u.timesCountedAsKnown,u.reviewFrequencyFormula,u.llmServiceProvider,u.llmToken,u.llmModel);if(e&&0===e.code)c(e),i.value=!0,qa.nk.success("用户信息更新成功"),setTimeout(()=>{location.reload()},1e3);else{s.value=!0,i.value=!0;const a=e?e.message:"更新失败，请重试";qa.nk.error(a)}},{isDark:k}=g();return(e,r)=>((0,o.uX)(),(0,o.Wv)(L,null,{default:(0,o.k6)(()=>[i.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(V.Ik),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Da.S2),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Pa.uD),{span:9},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Oa.zv),{size:120,src:(0,n.R1)(u).avatar},null,8,["src"])]),_:1}),(0,o.bF)((0,n.R1)(Pa.uD),{span:16},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Da.S2),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Pa.uD),{span:12},{default:(0,o.k6)(()=>[(0,o.Lk)("h2",null,(0,w.v_)((0,n.R1)(u).username),1)]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(Da.S2),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Pa.uD),{span:24},{default:(0,o.k6)(()=>[(0,o.Lk)("p",null,[(0,o.eW)("Email: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).email),1)]),(0,o.Lk)("p",null,[(0,o.eW)("当前所学语书: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(t).title),1)]),(0,o.Lk)("p",null,[(0,o.eW)("每日新单词数: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).dailyCount),1)]),(0,o.Lk)("p",null,[(0,o.eW)("复习频率公式: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).reviewFrequencyFormula),1)]),(0,o.Lk)("p",null,[(0,o.eW)("点击几次“认识”算学会: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).timesCountedAsKnown),1)]),(0,o.Lk)("p",null,[(0,o.eW)("LLM 链接: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).llmServiceProvider),1)]),(0,o.Lk)("p",null,[(0,o.eW)("LLM token: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).llmToken),1)]),(0,o.Lk)("p",null,[(0,o.eW)("LLM 模型: "),(0,o.Lk)("b",null,(0,w.v_)((0,n.R1)(u).llmModel),1)]),(0,o.Lk)("p",null,[(0,o.eW)(" 主题: "),(0,o.bF)((0,n.R1)(Za.qi),{modelValue:(0,n.R1)(k),"onUpdate:modelValue":r[0]||(r[0]=e=>(0,n.i9)(k)?k.value=e:null),class:"mt-2",style:{"margin-left":"24px"},"inline-prompt":"","active-icon":(0,n.R1)(Q.Il7),"inactive-icon":(0,n.R1)(Q.AX$)},null,8,["modelValue","active-icon","inactive-icon"])]),(0,o.bF)((0,n.R1)(S.S2),{onClick:r[1]||(r[1]=e=>m())},{default:(0,o.k6)(()=>[(0,o.eW)("修改")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(la.kZ),{modelValue:s.value,"onUpdate:modelValue":r[11]||(r[11]=e=>s.value=e),title:"修改设置"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Ja,[(0,o.bF)((0,n.R1)(S.S2),{onClick:p},{default:(0,o.k6)(()=>[(0,o.eW)("取消")]),_:1}),(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:v},{default:(0,o.k6)(()=>[(0,o.eW)("确认")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.US),{model:(0,n.R1)(u)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(ze.xE),{label:"用户名"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).username,"onUpdate:modelValue":r[2]||(r[2]=e=>(0,n.R1)(u).username=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"邮箱"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).email,"onUpdate:modelValue":r[3]||(r[3]=e=>(0,n.R1)(u).email=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"头像"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).avatar,"onUpdate:modelValue":r[4]||(r[4]=e=>(0,n.R1)(u).avatar=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"当前所学词书"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ya.dW),{"split-button":"",type:"primary"},{dropdown:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ya.Iy),null,{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,n.R1)(a),e=>((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ya.c6),{key:e.id,onClick:a=>l(e.id)},{default:(0,o.k6)(()=>[(0,o.eW)((0,w.v_)(e.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:(0,o.k6)(()=>[(0,o.eW)((0,w.v_)((0,n.R1)(t).title||"选择词书")+" ",1)]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"每日新单词数"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(wa.lq),{modelValue:(0,n.R1)(u).dailyCount,"onUpdate:modelValue":r[5]||(r[5]=e=>(0,n.R1)(u).dailyCount=e),min:1,max:1e3},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"复习频率公式"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).reviewFrequencyFormula,"onUpdate:modelValue":r[6]||(r[6]=e=>(0,n.R1)(u).reviewFrequencyFormula=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"点击几次“认识”算学会"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(wa.lq),{modelValue:(0,n.R1)(u).timesCountedAsKnown,"onUpdate:modelValue":r[7]||(r[7]=e=>(0,n.R1)(u).timesCountedAsKnown=e),min:1,max:1e3},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"LLM 链接"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).llmServiceProvider,"onUpdate:modelValue":r[8]||(r[8]=e=>(0,n.R1)(u).llmServiceProvider=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"LLM token"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).llmToken,"onUpdate:modelValue":r[9]||(r[9]=e=>(0,n.R1)(u).llmToken=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(ze.xE),{label:"LLM 模型"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{modelValue:(0,n.R1)(u).llmModel,"onUpdate:modelValue":r[10]||(r[10]=e=>(0,n.R1)(u).llmModel=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const Na=Ga;var et=Na;const at=[{path:"/setting",name:"setting",redirect:"/setting/book",meta:{requiresAuth:!0},children:[{path:"book",name:"book_setting",component:Fa},{path:"word",name:"word_setting",component:Aa,props:!0},{path:"dictionary",name:"dictionary_setting",component:Qa},{path:"user",name:"user_setting",component:et}]}];var tt=at;const lt=e=>((0,o.Qi)("data-v-55822bfc"),e=e(),(0,o.jt)(),e),ot={class:"query-container"},nt={class:"search-section"},ut={key:0,class:"results-section"},rt={class:"card-header"},dt={class:"word-title"},it={class:"header-actions"},ct={class:"word-content"},st={key:0,class:"meaning"},mt={key:1,class:"no-meaning"},pt={key:1,class:"welcome-section"},vt=lt(()=>(0,o.Lk)("h2",null,"单词查询工具",-1)),kt=lt(()=>(0,o.Lk)("p",null,"在输入框中输入要查询的单词，按回车或点击搜索按钮进行查询",-1)),ft=lt(()=>(0,o.Lk)("p",{class:"shortcuts"},"快捷键说明：",-1)),Rt=lt(()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.Lk)("strong",null,"Enter"),(0,o.eW)(" - 搜索单词")]),(0,o.Lk)("li",null,[(0,o.Lk)("strong",null,"S"),(0,o.eW)(" - 打开词典搜索")]),(0,o.Lk)("li",null,[(0,o.Lk)("strong",null,"数字键 1-9"),(0,o.eW)(" - 在对应词典中搜索")])],-1)),bt={class:"dictionary-list"},_t=["href"],gt={class:"note-editor"},yt=["innerHTML"],ht={class:"editor-actions"};var Ft={__name:"QueryView",setup(e){const a=(0,n.KR)(""),t=(0,n.KR)(""),u=(0,n.KR)(""),r=(0,n.KR)(!1),d=(0,n.KR)(!1),i=(0,n.KR)(!1),c=(0,n.KR)("edit"),s=(0,n.KR)(""),m=(0,n.KR)([]),p=new(D())({html:!0,linkify:!0,typographer:!0}),v=(0,o.EW)(()=>s.value?p.render(s.value):'<p class="empty-note">暂无笔记内容</p>');(0,o.sV)(async()=>{const e=await O();e&&e.data&&(m.value=e.data)});const k=()=>{a.value.trim()&&(t.value=a.value.trim(),u.value="",r.value=!0,setTimeout(()=>{u.value=`这是 ${t.value} 的示例释义。在实际应用中，这里会显示单词的真实释义。`},300))},f=e=>{if(!i.value)if("Enter"===e.key)k();else if("s"===e.key||"S"===e.key)r.value&&(d.value=!d.value);else if("0123456789".includes(e.key)){let a=+e.key;if(0===a&&(a=10),a<=m.value.length&&r.value){const e=m.value[a-1];window.open(e.prefix+(t.value||"")+(e.suffix||""),"_blank")}}},R=()=>{console.log("保存笔记:",s.value),i.value=!1};return(e,p)=>((0,o.uX)(),(0,o.Wv)(L,{onKeydown:f,tabindex:"0"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ot,[(0,o.Lk)("div",nt,[(0,o.bF)((0,n.R1)(B.WK),{modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=e=>a.value=e),placeholder:"输入要查询的单词",size:"large",onKeyup:(0,l.jR)(k,["enter"]),class:"search-input"},{append:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{onClick:k,icon:(0,n.R1)(Q.vji)},{default:(0,o.k6)(()=>[(0,o.eW)("搜索")]),_:1},8,["icon"])]),_:1},8,["modelValue"])]),r.value?((0,o.uX)(),(0,o.CE)("div",ut,[(0,o.bF)((0,n.R1)(V.Ik),{class:"word-card"},{header:(0,o.k6)(()=>[(0,o.Lk)("div",rt,[(0,o.Lk)("span",dt,(0,w.v_)(t.value),1),(0,o.Lk)("div",it,[(0,o.bF)((0,n.R1)(X.R7),{content:"搜索词典 (快捷键: S)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{circle:"",onClick:p[1]||(p[1]=e=>d.value=!d.value)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(z.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Q.vji))]),_:1})]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(X.R7),{content:"添加笔记 (Markdown支持)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(S.S2),{circle:"",onClick:p[2]||(p[2]=e=>i.value=!0)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(z.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Q.EDh))]),_:1})]),_:1})]),_:1})])])]),default:(0,o.k6)(()=>[(0,o.Lk)("div",ct,[u.value?((0,o.uX)(),(0,o.CE)("div",st,(0,w.v_)(u.value),1)):((0,o.uX)(),(0,o.CE)("div",mt,"该单词暂无释义"))])]),_:1})])):((0,o.uX)(),(0,o.CE)("div",pt,[(0,o.bF)((0,n.R1)(V.Ik),{class:"welcome-card"},{default:(0,o.k6)(()=>[vt,kt,ft,Rt]),_:1})]))]),(0,o.bF)((0,n.R1)(T.pw),{modelValue:d.value,"onUpdate:modelValue":p[3]||(p[3]=e=>d.value=e),title:"词典搜索","with-header":!0},{default:(0,o.k6)(()=>[(0,o.Lk)("div",bt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.value,(e,a)=>((0,o.uX)(),(0,o.CE)("p",{key:e.id,class:"dictionary-item"},[(0,o.Lk)("a",{href:e.prefix+(t.value||"")+(e.suffix||""),target:"_blank"},[(0,o.Lk)("strong",null,(0,w.v_)(a+1)+". "+(0,w.v_)(e.title),1)],8,_t),(0,o.bF)((0,n.R1)(M.fR))]))),128))])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(T.pw),{modelValue:i.value,"onUpdate:modelValue":p[7]||(p[7]=e=>i.value=e),title:"笔记 (Markdown支持)","with-header":!0,size:"50%"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",gt,[(0,o.bF)((0,n.R1)($.q),{modelValue:c.value,"onUpdate:modelValue":p[5]||(p[5]=e=>c.value=e),type:"border-card"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)($.v$),{label:"编辑",name:"edit"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.WK),{type:"textarea",placeholder:"添加笔记 (支持Markdown语法)",modelValue:s.value,"onUpdate:modelValue":p[4]||(p[4]=e=>s.value=e),rows:20,maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)($.v$),{label:"预览",name:"preview"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"markdown-preview",innerHTML:v.value},null,8,yt)]),_:1})]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(M.fR)),(0,o.Lk)("div",ht,[(0,o.bF)((0,n.R1)(S.S2),{type:"primary",onClick:R},{default:(0,o.k6)(()=>[(0,o.eW)("保存")]),_:1}),(0,o.bF)((0,n.R1)(S.S2),{onClick:p[6]||(p[6]=e=>i.value=!1)},{default:(0,o.k6)(()=>[(0,o.eW)("取消")]),_:1})])])]),_:1},8,["modelValue"])]),_:1}))}};const wt=(0,p.A)(Ft,[["__scopeId","data-v-55822bfc"]]);var Vt=wt;const St=e=>((0,o.Qi)("data-v-3a93085f"),e=e(),(0,o.jt)(),e),Kt={id:"app"},Wt={class:"container"},Ct=St(()=>(0,o.Lk)("h1",null,"录音机",-1)),xt={class:"controls"},Lt=["src"];function Et(e,a,t,n,u,r){return(0,o.uX)(),(0,o.CE)("div",Kt,[(0,o.Lk)("div",Wt,[Ct,(0,o.Lk)("div",xt,[(0,o.Lk)("button",{class:"btn",onClick:a[0]||(a[0]=(...e)=>r.startRecording&&r.startRecording(...e))},"开始录音"),(0,o.Lk)("button",{class:"btn",onClick:a[1]||(a[1]=(...e)=>r.stopRecording&&r.stopRecording(...e))},"停止录音"),(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number","onUpdate:modelValue":a[2]||(a[2]=e=>u.duration=e),placeholder:"自动停止时间（秒）"},null,512),[[l.Jo,u.duration]])]),u.countdown>0?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,class:"input","onUpdate:modelValue":a[3]||(a[3]=e=>u.countdown=e),placeholder:"剩余时间",readonly:""},null,512)),[[l.Jo,u.countdown]]):(0,o.Q3)("",!0),u.audioUrl?((0,o.uX)(),(0,o.CE)("audio",{key:1,src:u.audioUrl,controls:""},null,8,Lt)):(0,o.Q3)("",!0)])])}t(4603),t(7566),t(8721);var It={data(){return{mediaRecorder:null,audioChunks:[],audioUrl:null,countdown:0,countdownInterval:null,duration:45}},methods:{async startRecording(){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});this.mediaRecorder=new MediaRecorder(e),this.audioChunks=[],this.mediaRecorder.ondataavailable=e=>{this.audioChunks.push(e.data)},this.mediaRecorder.start(),this.startCountdown(this.duration)}catch(e){console.error("Error accessing audio",e)}},stopRecording(){this.mediaRecorder.stop(),this.mediaRecorder.onstop=()=>{const e=new Blob(this.audioChunks);this.audioUrl=URL.createObjectURL(e)},this.stopCountdown()},startCountdown(e){this.countdown=e,this.countdownInterval=setInterval(()=>{this.countdown--,this.countdown<=0&&this.stopRecording()},1e3)},stopCountdown(){clearInterval(this.countdownInterval),this.countdown=0}}};const At=(0,p.A)(It,[["render",Et],["__scopeId","data-v-3a93085f"]]);var Ut=At;const jt=[{path:"/tool",name:"tool",children:[{path:"query",name:"query",component:Vt},{path:"record",name:"record",component:Ut}]}];var Xt=jt;const zt=[{path:"/",name:"home",redirect:"/word"},{path:"/404",name:"404",redirect:"/word"},{path:"/:pathMatch(.*)*",redirect:"/404"}],Tt=(0,d.aE)({history:(0,d.Bt)(),routes:[...Xe,...Je,...tt,...Xt,...zt]});var Mt=Tt,$t={state:{isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token")||""},mutations:{setServerLink(e,a){localStorage.setItem("server_link",a)},setAuth(e,a){e.isAuthenticated=a},setToken(e,a){e.token=a,localStorage.setItem("token",a)},logout(e){e.isAuthenticated=!1,e.token=null,localStorage.removeItem("book_id"),localStorage.removeItem("server_link"),localStorage.removeItem("token")}},actions:{async register(e,{serverLink:a,username:t,email:l,avatar:o,password:n,confirm_password:u}){try{const e=await E.A.post(a+"/user/register",{username:t,email:l,avatar:o,password:n,confirm_password:u}),r=e.data;return 0===r.code||r.message}catch(r){return"发生了未知错误, 注册失败"}},async login({commit:e},{serverLink:a,username:t,password:l}){try{const o=await E.A.post(a+"/user/login",{username:t,password:l}),n=o.data;return 0===n.code?(e("setServerLink",a),e("setAuth",!0),e("setToken",n.data.token),!0):n.message}catch(o){return"登录失败，请检查链接是否正确，后台服务是否开启"}},logout({commit:e}){e("logout")}},getters:{isAuthenticated:e=>e.isAuthenticated}};const Bt=(0,r.y$)({modules:{user:$t}});var Qt=Bt;const qt=(0,l.Ef)(F);qt.use(Qt),Mt.beforeEach((e,a,t)=>{const l=e.meta.requiresAuth;l&&!Qt.state.user.isAuthenticated?t("/login"):t()}),qt.use(Mt),qt.mount("#app")}},a={};function t(l){var o=a[l];if(void 0!==o)return o.exports;var n=a[l]={id:l,loaded:!1,exports:{}};return e[l].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,function(){var e=[];t.O=function(a,l,o,n){if(!l){var u=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],n=e[c][2];for(var r=!0,d=0;d<l.length;d++)(!1&n||u>=n)&&Object.keys(t.O).every(function(e){return t.O[e](l[d])})?l.splice(d--,1):(r=!1,n<u&&(u=n));if(r){e.splice(c--,1);var i=o();void 0!==i&&(a=i)}}return a}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,o,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var o,n,u=l[0],r=l[1],d=l[2],i=0;if(u.some(function(a){return 0!==e[a]})){for(o in r)t.o(r,o)&&(t.m[o]=r[o]);if(d)var c=d(t)}for(a&&a(l);i<u.length;i++)n=u[i],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},l=self["webpackChunkspeak_sphere"]=self["webpackChunkspeak_sphere"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],function(){return t(2630)});l=t.O(l)})();
//# sourceMappingURL=app.85f84b6e.js.map