(function(){"use strict";var e={7535:function(e,a,t){var l=t(5130),o=t(6768),n=(t(1397),t(1862),t(144)),r=(t(4188),t(4975)),u=(t(4114),t(782)),i=t(1387),s={__name:"LoginAndLogoutMenuItem",setup(e){const a=(0,u.Pj)(),t=(0,i.rd)(),l=async()=>{await t.push({name:"login"})},s=async()=>{await a.dispatch("logout"),await t.push({name:"login"})};return(e,t)=>(0,n.R1)(a).state.user.isAuthenticated?((0,o.uX)(),(0,o.Wv)((0,n.R1)(r.ct),{key:0,index:"4",onClick:s},{default:(0,o.k6)(()=>[(0,o.eW)("é€€å‡ºç™»å½•")]),_:1})):((0,o.uX)(),(0,o.Wv)((0,n.R1)(r.ct),{key:1,index:"4",onClick:l},{default:(0,o.k6)(()=>[(0,o.eW)("ç™»å½•")]),_:1}))}};const c=s;var d=c,p={__name:"NavBar",setup(e){const a=(0,n.KR)("4"),t=(0,u.Pj)();t.state.user.isAuthenticated&&(a.value="1");const l=()=>{window.open("https://www.zhihu.com/question/309418216/answer/1965169328514109501","_blank")},i=()=>{window.open("https://stackedit.io/app#","_blank")};return(e,t)=>{const u=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.Wv)((0,n.R1)(r.lj),{"default-active":a.value,class:"el-menu-demo",mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},{default:(0,o.k6)(()=>[(0,o.bF)(u,{to:{name:"vocabulary"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"1"},{title:(0,o.k6)(()=>[(0,o.eW)("å•è¯")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(r.$b),{index:"2"},{title:(0,o.k6)(()=>[(0,o.eW)("è®¾ç½®")]),default:(0,o.k6)(()=>[(0,o.bF)(u,{to:{name:"vocabulary_set_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"2-1"},{default:(0,o.k6)(()=>[(0,o.eW)("è¯ä¹¦è®¾ç½®")]),_:1})]),_:1}),(0,o.bF)(u,{to:{name:"dictionary_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"2-2"},{default:(0,o.k6)(()=>[(0,o.eW)("è¯å…¸è®¾ç½®")]),_:1})]),_:1}),(0,o.bF)(u,{to:{name:"llm_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"2-3"},{default:(0,o.k6)(()=>[(0,o.eW)("LLMæœåŠ¡è®¾ç½®")]),_:1})]),_:1}),(0,o.bF)(u,{to:{name:"aiprompt_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"2-4"},{default:(0,o.k6)(()=>[(0,o.eW)("AIæç¤ºè¯è®¾ç½®")]),_:1})]),_:1}),(0,o.bF)(u,{to:{name:"user_setting"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"2-5"},{default:(0,o.k6)(()=>[(0,o.eW)("ç”¨æˆ·è®¾ç½®")]),_:1})]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(r.$b),{index:"3"},{title:(0,o.k6)(()=>[(0,o.eW)("å·¥å…·")]),default:(0,o.k6)(()=>[(0,o.bF)(u,{to:{name:"record"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"3-1"},{default:(0,o.k6)(()=>[(0,o.eW)(" å£è¯­å½•éŸ³ ")]),_:1})]),_:1}),(0,o.bF)(u,{to:{name:"query"}},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(r.ct),{index:"3-2"},{title:(0,o.k6)(()=>[(0,o.eW)("æŸ¥è¯¢å•è¯")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(r.ct),{index:"3-3",onClick:i},{default:(0,o.k6)(()=>[(0,o.eW)(" åœ¨çº¿Markdownæ¸²æŸ“ ")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(r.ct),{index:"4",onClick:l},{default:(0,o.k6)(()=>[(0,o.eW)(" å¸®åŠ© ")]),_:1}),(0,o.bF)(d)]),_:1},8,["default-active"])}}},v=t(1241);const m=(0,v.A)(p,[["__scopeId","data-v-5cf1e9eb"]]);var k=m,f=t(7383),b=t(153);const y=()=>{const e=(0,f.C6J)({storageKey:"speak-sphere-theme",valueDark:"dark",valueLight:"light"}),a=(0,b.eY)(e),t=()=>{const a=localStorage.getItem("speak-sphere-theme");a||(e.value=window.matchMedia("(prefers-color-scheme: dark)").matches)};return{isDark:e,toggleDark:a,initTheme:t}};let g=null;const R=()=>(g||(g=y(),g.initTheme()),g);var _={__name:"App",setup(e){return R(),(e,a)=>{const t=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(k),(0,o.bF)(t)],64)}}};const h=_;var w=h,F=t(4232),V=t(683),C=t(1702);const x={class:"content-area"};function S(e,a){return(0,o.uX)(),(0,o.CE)("div",x,[(0,o.RG)(e.$slots,"default",{},void 0,!0)])}const W={},L=(0,v.A)(W,[["render",S],["__scopeId","data-v-6a9f74f6"]]);var K=L,A=t(4373);const I={class:"buttons"};var E={__name:"VocabularyModuleView",setup(e){const a=(0,n.KR)(""),t=(0,n.KR)(!1);(0,o.sV)(async()=>{t.value=!1;const e="https://api.unsplash.com/photos/random?client_id=dow523p27APOI8KgcFO0XXCZ2GUv_E1Xhf6iJ0z4XDA";let l=localStorage.getItem("homepage_image_url");null==l&&await A.A.get(e).then(e=>{l=e.data.urls.regular,localStorage.setItem("homepage_image_url",l)}).catch(e=>{console.error("Error fetching image:",e)}),a.value=l,t.value=!0});const l=(0,i.rd)(),r=()=>{l.push("/review")},u=()=>{l.push("/learn")};return(e,l)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[t.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(V.Ik),{key:0,class:"card"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"image-wrapper",style:(0,F.Tr)({backgroundImage:"url("+a.value+")"})},[(0,o.Lk)("div",I,[(0,o.bF)((0,n.R1)(C.S2),{text:"",class:"button",onClick:r},{default:(0,o.k6)(()=>[(0,o.eW)("Review")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{text:"",class:"button",onClick:u},{default:(0,o.k6)(()=>[(0,o.eW)("Learn")]),_:1})])],4)]),_:1})):(0,o.Q3)("",!0)]),_:1}))}};const U=(0,v.A)(E,[["__scopeId","data-v-31e96afc"]]);var X=U,j=t(3851),$=t(5812),P=t(813),T=t(9385),z=t(8165),Q=t(2462),M=t(1040),B=t(7477);const q=e=>((0,o.Qi)("data-v-16c24412"),e=e(),(0,o.jt)(),e),O={class:"drawer-header"},D=q(()=>(0,o.Lk)("h3",null,"LLM å•è¯æŸ¥è¯¢",-1)),Z={class:"drawer-content"},H={key:0,class:"config-status"},Y={key:1,class:"llm-content"},J={class:"prompt-section"},N={class:"section-header"},G=q(()=>(0,o.Lk)("h4",null,"AI æç¤ºè¯",-1)),ee={class:"prompt-actions"},ae=q(()=>(0,o.Lk)("div",{class:"prompt-tips"},[(0,o.Lk)("small",null,[(0,o.eW)("æç¤ºï¼šç‚¹å‡»æ–‡æœ¬æ¡†å¯ä»¥ç¼–è¾‘æç¤ºè¯å†…å®¹ï¼Œä½¿ç”¨ "),(0,o.Lk)("code",null,"#vocabulary#"),(0,o.eW)(" ä½œä¸ºå½“å‰å•è¯çš„å ä½ç¬¦")])],-1)),te={class:"query-section"},le={key:0,class:"response-section"},oe=q(()=>(0,o.Lk)("h4",null,"LLM å›å¤",-1)),ne=["innerHTML"];function re(e,a,t,n,r,u){const i=(0,o.g2)("Close"),s=(0,o.g2)("el-icon"),c=(0,o.g2)("el-button"),d=(0,o.g2)("el-alert");return r.drawerVisible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"custom-drawer-overlay",onClick:a[3]||(a[3]=(...e)=>u.closePanel&&u.closePanel(...e))},[(0,o.Lk)("div",{class:"custom-drawer",onClick:a[2]||(a[2]=(0,l.D$)(()=>{},["stop"]))},[(0,o.Lk)("div",O,[D,(0,o.bF)(c,{type:"text",onClick:u.closePanel,class:"close-btn"},{default:(0,o.k6)(()=>[(0,o.bF)(s,null,{default:(0,o.k6)(()=>[(0,o.bF)(i)]),_:1})]),_:1},8,["onClick"])]),(0,o.Lk)("div",Z,["ready"!==r.configStatus?((0,o.uX)(),(0,o.CE)("div",H,["loading"===r.configStatus?((0,o.uX)(),(0,o.Wv)(d,{key:0,title:"æ­£åœ¨åŠ è½½é…ç½®...",type:"info","show-icon":""})):(0,o.Q3)("",!0),"no_vocabulary"===r.configStatus?((0,o.uX)(),(0,o.Wv)(d,{key:1,title:"è¯·å…ˆé€‰æ‹©è¦æŸ¥è¯¢çš„å•è¯",type:"warning","show-icon":""})):(0,o.Q3)("",!0),"no_prompt"===r.configStatus?((0,o.uX)(),(0,o.Wv)(d,{key:2,title:"è¯·å…ˆè®¾ç½®é»˜è®¤AIæç¤ºè¯",type:"warning","show-icon":""})):(0,o.Q3)("",!0),"no_llm"===r.configStatus?((0,o.uX)(),(0,o.Wv)(d,{key:3,title:"è¯·å…ˆè®¾ç½®é»˜è®¤LLMæœåŠ¡",type:"warning","show-icon":""})):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0),"ready"===r.configStatus?((0,o.uX)(),(0,o.CE)("div",Y,[(0,o.Lk)("div",J,[(0,o.Lk)("div",N,[G,(0,o.Lk)("div",ee,[(0,o.bF)(c,{class:"test-button-copy",size:"small",onClick:u.copyPrompt,style:{"background-color":"#409eff",color:"white",border:"2px solid #409eff",padding:"6px 12px","border-radius":"4px","min-width":"60px","text-align":"center","justify-content":"center"}},{default:(0,o.k6)(()=>[(0,o.eW)("å¤åˆ¶")]),_:1},8,["onClick"]),(0,o.bF)(c,{class:"test-button-reset",size:"small",onClick:u.resetPrompt,style:{"background-color":"#909399",color:"white",border:"2px solid #909399",padding:"6px 12px","border-radius":"4px","min-width":"60px","text-align":"center","justify-content":"center"}},{default:(0,o.k6)(()=>[(0,o.eW)("é‡ç½®")]),_:1},8,["onClick"])])]),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.editablePrompt=e),rows:6,placeholder:"æ­£åœ¨åŠ è½½æç¤ºè¯...",class:"prompt-textarea-native",onInput:a[1]||(a[1]=(...e)=>u.onPromptChange&&u.onPromptChange(...e))},null,544),[[l.Jo,r.editablePrompt]]),ae]),(0,o.Lk)("div",te,[(0,o.bF)(c,{class:"test-button-query",onClick:u.queryLLM,loading:r.isQuerying,disabled:r.isQuerying,style:{"background-color":"#67c23a",color:"white",border:"2px solid #67c23a",padding:"6px 12px","border-radius":"4px","min-width":"60px","text-align":"center","justify-content":"center"}},{default:(0,o.k6)(()=>[(0,o.eW)((0,F.v_)(r.isQuerying?"æŸ¥è¯¢ä¸­...":"æŸ¥è¯¢"),1)]),_:1},8,["onClick","loading","disabled"]),(0,o.bF)(c,{onClick:u.closePanel,style:{"background-color":"#909399",color:"white",border:"2px solid #909399",padding:"6px 12px","border-radius":"4px","min-width":"60px","text-align":"center","justify-content":"center"}},{default:(0,o.k6)(()=>[(0,o.eW)(" å…³é—­ ")]),_:1},8,["onClick"]),u.hasResponse?((0,o.uX)(),(0,o.Wv)(c,{key:0,onClick:u.clearResponse,style:{"background-color":"#f56c6c",color:"white",border:"2px solid #f56c6c",padding:"6px 12px","border-radius":"4px","min-width":"60px","text-align":"center","justify-content":"center"}},{default:(0,o.k6)(()=>[(0,o.eW)("æ¸…é™¤å›å¤")]),_:1},8,["onClick"])):(0,o.Q3)("",!0)]),u.hasResponse||r.isQuerying?((0,o.uX)(),(0,o.CE)("div",le,[oe,(0,o.Lk)("div",{ref:"responseContentRef",class:"response-content",innerHTML:u.renderedResponse},null,8,ne)])):(0,o.Q3)("",!0)])):(0,o.Q3)("",!0)])])])):(0,o.Q3)("",!0)}t(8992),t(4520);var ue=t(167);const ie=async()=>{try{const e=localStorage.getItem("token"),a=localStorage.getItem("server_link"),t=a+"/aiprompt/list",l=await A.A.get(t,{headers:{Authorization:`Bearer ${e}`}});return l.data}catch(e){return console.error("æŸ¥è¯¢AIæç¤ºè¯å‡ºé”™:",e),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},se=async()=>{try{const e=localStorage.getItem("token"),a=localStorage.getItem("server_link"),t=a+"/aiprompt/default",l=await A.A.get(t,{headers:{Authorization:`Bearer ${e}`}});return l.data}catch(e){return console.error("æŸ¥è¯¢é»˜è®¤AIæç¤ºè¯å‡ºé”™:",e),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},ce=async()=>{try{const e=localStorage.getItem("token"),a=localStorage.getItem("server_link"),t=a+"/llm/list",l=await A.A.get(t,{headers:{Authorization:`Bearer ${e}`}});return l.data}catch(e){return console.error("æŸ¥è¯¢LLMæœåŠ¡å‡ºé”™:",e),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},de=async()=>{try{const e=localStorage.getItem("token"),a=localStorage.getItem("server_link"),t=a+"/llm/default",l=await A.A.get(t,{headers:{Authorization:`Bearer ${e}`}});return l.data}catch(e){return console.error("æŸ¥è¯¢é»˜è®¤LLMæœåŠ¡å‡ºé”™:",e),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}};var pe=t(642),ve=t(6697),me=t(2464),ke=t(9782),fe=t(539),be=t(9084),ye=t(9982),ge=t(5686),Re=t.n(ge),_e={name:"LLMQueryPanel",components:{Close:B.bm},props:{currentVocabulary:{type:String,default:""}},data(){const e=new pe.A({html:!0,linkify:!0,typographer:!0}).use(ve.A).use(me.A).use(ke.A).use(fe.A).use(be.A).use(ye.A).use(Re());return{drawerVisible:!0,configStatus:"loading",aiPrompt:null,llmConfig:null,isQuerying:!1,responseText:"",controller:null,md:e,editablePrompt:"",originalPrompt:""}},computed:{hasResponse(){return this.responseText.length>0},renderedResponse(){return this.md&&this.responseText?this.md.render(this.responseText):""}},methods:{closePanel(){this.drawerVisible=!1,this.$emit("close")},onPromptChange(e){console.log("æç¤ºè¯å·²æ›´æ–°:",e)},copyPrompt(){try{navigator.clipboard.writeText(this.editablePrompt),ue.nk.success("æç¤ºè¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch(e){console.error("å¤åˆ¶å¤±è´¥:",e),ue.nk.error("å¤åˆ¶å¤±è´¥")}},resetPrompt(){this.originalPrompt&&(this.editablePrompt=this.originalPrompt.replace(/#vocabulary#/g,this.currentVocabulary),ue.nk.success("æç¤ºè¯å·²é‡ç½®ä¸ºé»˜è®¤"))},async loadConfigurations(){if(this.currentVocabulary){this.configStatus="loading";try{const e=await se();if(0!==e.code||!e.data)return void(this.configStatus="no_prompt");this.aiPrompt=e.data,this.originalPrompt=this.aiPrompt.content||"",this.editablePrompt=this.originalPrompt.replace(/#vocabulary#/g,this.currentVocabulary),console.log("æç¤ºè¯å¤„ç†:",{original:this.originalPrompt,currentVocabulary:this.currentVocabulary,editable:this.editablePrompt});const a=await de();if(0!==a.code||!a.data)return void(this.configStatus="no_llm");this.llmConfig=a.data,this.configStatus="ready",console.log("é…ç½®åŠ è½½å®Œæˆï¼ŒeditablePrompt:",this.editablePrompt)}catch(e){console.error("åŠ è½½é…ç½®å¤±è´¥:",e),this.configStatus="no_prompt"}}else this.configStatus="no_vocabulary"},async queryLLM(){if(this.aiPrompt&&this.llmConfig)if(this.currentVocabulary){this.isQuerying=!0,this.responseText="";try{this.controller=new AbortController;let a=this.llmConfig.endpoint;if(!a)throw new Error("LLMæœåŠ¡é…ç½®ä¸­çš„endpointä¸ºç©º");a.startsWith("http://")||a.startsWith("https://")||(a="https://"+a);let t=a;t.includes("/chat/completions")||(t.endsWith("/v1")||(t=t.replace(/\/+$/,"")+"/v1"),t+="/chat/completions");const l=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.llmConfig.api_key}`},body:JSON.stringify({model:this.llmConfig.model,messages:[{role:"user",content:this.editablePrompt}],stream:!0,max_tokens:1e3,temperature:.7}),signal:this.controller.signal});if(!l.ok){const e=await l.text();throw new Error(`HTTP ${l.status}: ${e}`)}const o=l.body.getReader(),n=new TextDecoder;let r=!0;while(r){const{done:a,value:t}=await o.read();if(a){r=!1;break}const l=n.decode(t,{stream:!0}),u=l.split("\n").filter(e=>""!==e.trim());for(const o of u)if(o.startsWith("data: ")){const a=o.slice(6);if("[DONE]"===a){r=!1;break}try{const e=JSON.parse(a),t=e.choices[0]?.delta?.content;t&&(this.responseText+=t,this.$nextTick(()=>{const e=this.$refs.responseContentRef;e&&(e.scrollTop=e.scrollHeight)}))}catch(e){console.warn("è§£ææµæ•°æ®å¤±è´¥:",e,"æ•°æ®:",a)}}}}catch(a){if("AbortError"===a.name)ue.nk.info("æŸ¥è¯¢å·²å–æ¶ˆ");else{console.error("æŸ¥è¯¢å¤±è´¥:",a);let e="æŸ¥è¯¢å¤±è´¥";e=a.message.includes("Failed to fetch")?"ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥LLMæœåŠ¡åœ°å€æ˜¯å¦æ­£ç¡®":a.message.includes("401")?"APIå¯†é’¥æ— æ•ˆï¼Œè¯·æ£€æŸ¥LLMæœåŠ¡é…ç½®":a.message.includes("404")?"APIç«¯ç‚¹æœªæ‰¾åˆ°ï¼Œè¯·æ£€æŸ¥LLMæœåŠ¡åœ°å€":`æŸ¥è¯¢å¤±è´¥: ${a.message}`,ue.nk.error(e)}}finally{this.isQuerying=!1,this.controller=null}}else ue.nk.error("è¯·å…ˆé€‰æ‹©è¦æŸ¥è¯¢çš„å•è¯");else ue.nk.error("é…ç½®ä¿¡æ¯ä¸å®Œæ•´")},clearResponse(){this.responseText=""}},watch:{currentVocabulary:{immediate:!0,handler(e){console.log("å½“å‰å•è¯å˜åŒ–:",e),e&&this.loadConfigurations()}}}};const he=(0,v.A)(_e,[["render",re],["__scopeId","data-v-16c24412"]]);var we=he;async function Fe(){try{const e=localStorage.getItem("server_link"),a=localStorage.getItem("token"),t=e+"/user/profile",l=await A.A.get(t,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return console.log(l.data.data),l.data.data}catch(e){console.error("Error fetching data from backend:",e)}}async function Ve(){try{const e=localStorage.getItem("server_link"),a=localStorage.getItem("token"),t=await A.A.get(e+"/dictionary/list",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return t.data}catch(e){console.error("Error fetching data from backend:",e)}}async function Ce(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=await A.A.get(a+"/vocabulary/"+e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return l.data}catch(a){console.error("Error fetching data from backend:",a)}}async function xe(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=await A.A.get(a+"/vocabulary/count/"+e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return l.data}catch(a){console.error("Error fetching data from backend:",a)}}async function Se(e,a,t){try{const l=localStorage.getItem("server_link"),o=localStorage.getItem("token"),n=await A.A.get(l+"/vocabulary/list?vocabulary_set_id="+e+"&pageSize="+a+"&currentPage="+t,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return n.data}catch(l){console.error("Error fetching data from backend:",l)}}async function We(e,a){try{const t=localStorage.getItem("server_link"),l=localStorage.getItem("token"),o=await A.A.get(t+"/vocabulary/check?vocabulary="+encodeURIComponent(e)+"&vocabulary_set_id="+a,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});return o.data}catch(t){return console.error("Error fetching data from backend:",t),{code:1,message:"æŸ¥è¯¢å¤±è´¥"}}}t(2577),t(3949);function Le(e){if(!e)return"";const a=e.toLowerCase();let t=a.lastIndexOf("/"),l=a.substring(t);return l.includes("uk")?"UK":l.includes("us")?"US":l.includes("au")?"AU":l.includes("ca")?"CA":""}async function Ke(e){try{const a=await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${encodeURIComponent(e)}`);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);const t=await a.json();if(!t||!Array.isArray(t)||0===t.length||!t[0].vocabulary)throw new Error("Empty or invalid data returned from dictionary API");return{success:!0,data:t,source:"dictionaryapi"}}catch(a){return console.error("Error fetching vocabulary definition from dictionaryapi.dev:",a),{success:!0,data:null,source:"wiktionary",wiktionaryUrl:`https://en.wiktionary.org/wiki/${encodeURIComponent(e)}`}}}function Ae(e){if("wiktionary"===e.source){const a=window.innerWidth<=768;return a?`\n        <div class="wiktionary-mobile-notice">\n          <div class="wiktionary-mobile-content">\n            <div class="notice-title">ä½¿ç”¨ Wiktionary æŸ¥è¯¢</div>\n            <div class="notice-message">å½“å‰ä½¿ç”¨ Wiktionary ä½œä¸ºå¤‡é€‰è¯å…¸æº</div>\n            <div class="action-buttons">\n              <button class="open-wiktionary-btn" onclick="openWiktionaryFullscreen('${e.wiktionaryUrl}')">\n                å…¨å±æ‰“å¼€ Wiktionary\n              </button>\n              <button class="open-new-tab-btn" onclick="window.open('${e.wiktionaryUrl}', '_blank')">\n                æ–°æ ‡ç­¾é¡µæ‰“å¼€\n              </button>\n            </div>\n          </div>\n        </div>\n        <style>\n          .wiktionary-mobile-notice {\n            background: var(--el-bg-color);\n            border: 1px solid var(--el-border-color);\n            border-radius: 8px;\n            padding: 20px;\n            margin: 10px 0;\n          }\n          .wiktionary-mobile-content {\n            display: flex;\n            flex-direction: column;\n            gap: 15px;\n          }\n          .notice-title {\n            font-size: 18px;\n            font-weight: bold;\n            color: var(--el-text-color-primary);\n          }\n          .notice-message {\n            color: var(--el-text-color-regular);\n          }\n          .action-buttons {\n            display: flex;\n            gap: 10px;\n            flex-wrap: wrap;\n          }\n          .open-wiktionary-btn, .open-new-tab-btn {\n            padding: 10px 15px;\n            border: none;\n            border-radius: 6px;\n            cursor: pointer;\n            font-size: 14px;\n            transition: all 0.3s ease;\n          }\n          .open-wiktionary-btn {\n            background: var(--el-color-primary);\n            color: white;\n          }\n          .open-wiktionary-btn:hover {\n            background: var(--el-color-primary-light-3);\n          }\n          .open-new-tab-btn {\n            background: var(--el-fill-color-light);\n            color: var(--el-text-color-primary);\n            border: 1px solid var(--el-border-color);\n          }\n          .open-new-tab-btn:hover {\n            background: var(--el-fill-color);\n          }\n        </style>\n      `:`\n        <div class="wiktionary-container">\n          <div class="wiktionary-notice">\n            å½“å‰ä½¿ç”¨ Wiktionary ä½œä¸ºå¤‡é€‰è¯å…¸æº\n          </div>\n          <div class="wiktionary-loading" id="wiktionary-loading-${Date.now()}">\n            <div class="loading-spinner"></div>\n            <span>æ­£åœ¨åŠ è½½ Wiktionary é¡µé¢...</span>\n          </div>\n          <iframe \n            src="${e.wiktionaryUrl}" \n            class="wiktionary-iframe"\n            title="Wiktionary - ${e.wiktionaryUrl.split("/").pop()}"\n            sandbox="allow-same-origin allow-scripts allow-popups allow-forms"\n            referrerpolicy="no-referrer"\n            onload="document.getElementById('wiktionary-loading-${Date.now()}').style.display='none'; this.style.display='block'"\n            style="display:none"\n          ></iframe>\n        </div>\n      `}const a=e.data;if(!a||!Array.isArray(a)||0===a.length)return'<div class="no-meaning">No definition found</div>';const t=a[0];let l="";if(t.vocabulary&&(l+=`<div class="vocabulary-title">${t.vocabulary}</div>`),t.phonetics&&Array.isArray(t.phonetics)){const e=t.phonetics.find(e=>e.text)?.text;if(e){l+=`<div class="phonetic">Phonetic: ${e}`;const a=t.phonetics.filter(e=>e.audio&&""!==e.audio.trim());a.length>0&&(l+=' <span class="audio-buttons">',a.forEach((e,a)=>{const t=e.audio;let o=Le(t);o||(o=`Audio ${a+1}`),l+=`<button class="audio-btn" data-audio="${t}" title="Play ${o} pronunciation">ğŸ”Š${o}</button>`}),l+="</span>"),l+="</div>"}}return t.meanings&&Array.isArray(t.meanings)&&(l+='<div class="meanings-container">',t.meanings.forEach((e,a)=>{e.partOfSpeech&&(l+=`<div class="part-of-speech">ã€${e.partOfSpeech}ã€‘</div>`),e.definitions&&Array.isArray(e.definitions)&&(l+='<div class="definitions-list">',e.definitions.forEach((e,a)=>{e.definition&&(l+=`<div class="definition-item">\n              <span class="definition-number">${a+1}.</span>\n              <span class="definition-text">${e.definition}</span>`,e.example&&(l+=`<div class="example">Example: <em>${e.example}</em></div>`),e.synonyms&&e.synonyms.length>0&&(l+=`<div class="synonyms">Synonyms: ${e.synonyms.join(", ")}</div>`),l+="</div>")}),l+="</div>"),e.synonyms&&e.synonyms.length>0&&(l+=`<div class="meaning-synonyms">[Synonyms] ${e.synonyms.join(", ")}</div>`),e.antonyms&&e.antonyms.length>0&&(l+=`<div class="meaning-antonyms">[Antonyms] ${e.antonyms.join(", ")}</div>`),a<t.meanings.length-1&&(l+='<div class="meaning-separator"></div>')}),l+="</div>"),l||'<div class="no-meaning">No definition found</div>'}async function Ie(e,a,t,l,o,n,r,u,i){try{const s=localStorage.getItem("token"),c=localStorage.getItem("server_link"),d=c+"/vocabulary/update",p=await A.A.put(d,{id:e,vocabulary:a,meaning:t,vocabulary_set_id:l,note:o,unwanted:n,study_count:r,date_to_review:u,created_at:i},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});return p.data}catch(s){console.error("Error fetching data from backend:",s)}}async function Ee(e){try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/vocabulary/update/unwanted/"+e,o=await A.A.put(l,null,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}async function Ue(e){try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/vocabulary/update/study/count/"+e,o=await A.A.put(l,null,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}async function Xe(e){try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/vocabulary/update/reset/"+e,o=await A.A.put(l,null,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}var je=t(437);const $e=e=>((0,o.Qi)("data-v-7b8381dd"),e=e(),(0,o.jt)(),e),Pe=$e(()=>(0,o.Lk)("link",{rel:"stylesheet",href:"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css",crossorigin:"anonymous"},null,-1)),Te={key:0,class:"vocabulary-card"},ze={class:"header"},Qe={class:"vocabulary-display"},Me={class:"vocabulary-title-section"},Be={class:"vocabulary"},qe={key:0,class:"meaning-container"},Oe={key:0,class:"fetching-meaning"},De=["innerHTML"],Ze={key:2,class:"no-meaning"},He={class:"footer"},Ye={key:1,class:"vocabulary-card"},Je=$e(()=>(0,o.Lk)("h1",{class:"vocabulary"},"Loading data...",-1)),Ne=[Je],Ge={key:2,class:"vocabulary-card"},ea=$e(()=>(0,o.Lk)("h1",{class:"vocabulary"},"å½“å‰ä»»åŠ¡å·²å®Œæˆ",-1)),aa=[ea],ta=["onClick"],la={key:3,class:"wiktionary-fullscreen-modal"},oa={class:"wiktionary-fullscreen-content"},na=["src"],ra={class:"note-editor"},ua=["innerHTML"],ia={class:"editor-actions"};var sa={__name:"VocabularyCardView",props:["type"],setup(e){const a=e,t=(0,n.KR)(2),r=(0,n.KR)(!0),i=(0,n.KR)(!1),s=(0,n.KR)(!1),c=(0,n.KR)(!1),d=(0,n.KR)(!1),p=(0,n.KR)(""),v=(0,n.KR)("edit"),m=(0,n.KR)(!1),k=new pe.A({html:!0,linkify:!0,typographer:!0,tables:!0}).use(fe.A).use(me.A).use(ve.A).use(ke.A).use(be.A).use(ye.A).use(Re(),{engine:je.Ay,delimiters:"dollars",katexOptions:{macros:{"\\RR":"\\mathbb{R}"}}}),f=()=>{O(),v.value="edit",s.value=!s.value},b=(0,o.EW)(()=>X.value?k.render(X.value):'<p class="empty-note">æš‚æ— ç¬”è®°å†…å®¹</p>');let y=(0,n.Kh)([]),g=(0,n.Kh)([]),R=(0,n.KR)(0),_={};const h=(0,n.KR)(0),w=()=>g.length>0&&R.value<g.length&&g[R.value].vocabulary||"",V=()=>{c.value=!c.value},x=e=>{const a=e.prefix+g[R.value].vocabulary+(e.suffix||""),t=e.title.toLowerCase().includes("wiktionary"),l=window.innerWidth<=768;t&&l?(p.value=a,d.value=!0,i.value=!1):window.open(a,"_blank")};window.openWiktionaryFullscreen=e=>{d.value=!0,p.value=e};const S=(0,n.KR)(1),W=e=>{if(null==e||2===e.code){const e=(0,u.Pj)();e.dispatch("logout"),location.reload()}};(0,o.sV)(async()=>{const e=await Ce(a.type);if(W(e),g=e.data,null==g||0===g.length)return void(t.value=3);t.value=1;for(let a=0;a<g.length;a++)_[a]=0;const l=await Ve();W(l),y=l.data;const o=await Fe();W(o),h.value=o.times_counted_as_known,1===t.value&&g.length>0&&await Z()});const L=async e=>{if(!s.value)if("0123456789".includes(e.key)){let a=+e.key;0===a&&(a=10),a<=y.length&&i.value&&window.open(y[a-1].prefix+g[R.value].vocabulary+(y[a-1].suffix||""),"_blank")}else if("s"===e.key)i.value=!i.value;else if("n"===e.key){if(2!==S.value&&3!==S.value)return!0;await H()}else if("u"===e.key){if(2!==S.value)return!0;await U()}else if("j"===e.key){if(1!==S.value)return!0;await E()}else if("k"===e.key){if(1!==S.value)return!0;await I()}else{if("d"!==e.key&&"D"!==e.key)return!0;await A()}},A=async()=>{_[R.value]=h.value;const e=await Ee(g[R.value].id);W(e),await H()},I=async()=>{_[R.value]=0;const e=await Xe(g[R.value].id);W(e),S.value=3},E=async()=>{if(_[R.value]++,_[R.value]>=h.value){const e=await Ue(g[R.value].id);W(e)}S.value=2},U=async()=>{_[R.value]=0;const e=await Xe(g[R.value].id);W(e),await H()};let X=(0,n.KR)(""),q=(0,n.KR)("");const O=()=>{X.value=g[R.value].note},D=(0,o.EW)(()=>{const e=g[R.value]?.meaning||q.value;return e&&""!==e.trim()}),Z=async()=>{const e=g[R.value];if(!e)return;const a=e.meaning||"";if(!a||""===a.trim()&&!m.value){m.value=!0,q.value="";try{const a=await Ke(e.vocabulary);a.success?(q.value=Ae(a),console.log(`æˆåŠŸæŸ¥è¯¢åˆ°å•è¯ "${e.vocabulary}" çš„é‡Šä¹‰`)):(q.value="æš‚æ— é‡Šä¹‰",console.log(`å•è¯ "${e.vocabulary}" æŸ¥è¯¢å¤±è´¥:`,a))}catch(t){console.error(`å•è¯ "${e.vocabulary}" æŸ¥è¯¢å¼‚å¸¸:`,t),q.value="æš‚æ— é‡Šä¹‰"}finally{m.value=!1}}else q.value=a,console.log(`å•è¯ "${e.vocabulary}" å·²æœ‰é‡Šä¹‰:`,a)},H=async()=>{let e=R.value;do{e=(e+1)%g.length}while(e!==R.value&&_[e]>=h.value);e===R.value&&_[e]>=h.value?t.value=3:(S.value=1,R.value=e,await Z())},Y=async()=>{const e=await Ie(g[R.value].id,g[R.value].vocabulary,g[R.value].meaning,g[R.value].vocabulary_set_id,X.value,g[R.value].unwanted,g[R.value].study_count,g[R.value].date_to_review,g[R.value].created_at);W(e),null!=e&&0===e.code&&(0,j.df)({title:"Success",message:"æ›´æ–°æˆåŠŸ",type:"success",duration:1e3})},J=e=>{if(e.target.classList.contains("audio-btn")){const a=e.target.getAttribute("data-audio");a&&N(a)}},N=e=>{try{const a=new Audio(e);a.play().catch(e=>{console.error("éŸ³é¢‘æ’­æ”¾å¤±è´¥:",e)})}catch(a){console.error("éŸ³é¢‘åŠ è½½å¤±è´¥:",a)}};return(e,a)=>((0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(K,{onKeydown:L,tabindex:"0"},{default:(0,o.k6)(()=>[Pe,1===t.value?((0,o.uX)(),(0,o.CE)("div",Te,[(0,o.Lk)("div",ze,[(0,o.bF)((0,n.R1)($.R7),{content:"ä½¿ç”¨LLMæœç´¢å•è¯",placement:"top"},{default:(0,o.k6)(()=>[r.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:0,class:"centered-button",circle:"",onClick:V},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.wUE))]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.eW)(" Â  "),(0,o.bF)((0,n.R1)($.R7),{content:"æœç´¢å•è¯ (å¿«æ·é”®: S)",placement:"top"},{default:(0,o.k6)(()=>[r.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:0,class:"centered-button",circle:"",onClick:a[0]||(a[0]=e=>i.value=!i.value)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.vji))]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.eW)(" Â  "),(0,o.bF)((0,n.R1)($.R7),{content:"ç¼–è¾‘ç¬”è®° (æ”¯æŒMarkdownè¯­æ³•)",placement:"top"},{default:(0,o.k6)(()=>[r.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:0,class:"centered-button",circle:"",onClick:f},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.EDh))]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1}),(0,o.eW)(" Â  "),(0,o.bF)((0,n.R1)($.R7),{content:"æ ‡è®°ä¸ºä¸æƒ³å­¦ (å¿«æ·é”®: D)",placement:"top"},{default:(0,o.k6)(()=>[r.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:0,class:"centered-button",circle:"",onClick:A},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.epd))]),_:1})]),_:1})):(0,o.Q3)("",!0)]),_:1})]),(0,o.Lk)("div",Qe,[(0,o.Lk)("div",Me,[(0,o.Lk)("h1",Be,(0,F.v_)((0,n.R1)(g)[(0,n.R1)(R)].vocabulary),1)]),2===S.value||3===S.value?((0,o.uX)(),(0,o.CE)("div",qe,[m.value?((0,o.uX)(),(0,o.CE)("div",Oe," æ­£åœ¨æŸ¥è¯¢é‡Šä¹‰... ")):D.value?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"meaning-content",innerHTML:(0,n.R1)(q),onClick:J},null,8,De)):((0,o.uX)(),(0,o.CE)("div",Ze," æš‚æ— é‡Šä¹‰ "))])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",He,[1===S.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:0,onClick:E},{default:(0,o.k6)(()=>[(0,o.eW)("è®¤è¯†(J)")]),_:1})):(0,o.Q3)("",!0),1===S.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:1,onClick:I},{default:(0,o.k6)(()=>[(0,o.eW)("ä¸è®¤è¯†(K)")]),_:1})):(0,o.Q3)("",!0),2===S.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:2,onClick:U},{default:(0,o.k6)(()=>[(0,o.eW)("è®°é”™äº†(U)")]),_:1})):(0,o.Q3)("",!0),2===S.value||3===S.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:3,onClick:H},{default:(0,o.k6)(()=>[(0,o.eW)("ä¸‹ä¸€è¯(N)")]),_:1})):(0,o.Q3)("",!0)])])):2===t.value?((0,o.uX)(),(0,o.CE)("div",Ye,Ne)):3===t.value?((0,o.uX)(),(0,o.CE)("div",Ge,aa)):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(T.pw),{modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),title:"æœç´¢","with-header":!0},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,n.R1)(y),(e,a)=>((0,o.uX)(),(0,o.CE)("p",{key:e.id},[(0,o.Lk)("a",{href:"#",onClick:(0,l.D$)(a=>x(e),["prevent"]),class:(0,F.C4)({"wiktionary-link":e.title.toLowerCase().includes("wiktionary")})},[(0,o.Lk)("b",null,(0,F.v_)(a+1)+". "+(0,F.v_)(e.title),1)],10,ta),(0,o.bF)((0,n.R1)(z.fR))]))),128))]),_:1},8,["modelValue"]),d.value?((0,o.uX)(),(0,o.CE)("div",la,[(0,o.Lk)("div",oa,[(0,o.Lk)("button",{class:"close-fullscreen-btn",onClick:a[2]||(a[2]=e=>d.value=!1)},[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.bm))]),_:1})]),(0,o.Lk)("iframe",{src:p.value,class:"wiktionary-fullscreen-iframe",loading:"lazy"},null,8,na)])])):(0,o.Q3)("",!0)]),_:1}),(0,o.bF)((0,n.R1)(T.pw),{modelValue:s.value,"onUpdate:modelValue":a[6]||(a[6]=e=>s.value=e),title:"ç¬”è®° (æ”¯æŒMarkdownè¯­æ³•)","with-header":!0,size:"50%"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ra,[(0,o.bF)((0,n.R1)(Q.q),{modelValue:v.value,"onUpdate:modelValue":a[4]||(a[4]=e=>v.value=e),type:"border-card"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Q.v$),{label:"ç¼–è¾‘",name:"edit"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{type:"textarea",placeholder:"æ·»åŠ ç¬”è®° (æ”¯æŒMarkdownè¯­æ³•)",modelValue:(0,n.R1)(X),"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.i9)(X)?X.value=e:X=e),rows:20,maxlength:"1000","show-vocabulary-limit":""},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Q.v$),{label:"é¢„è§ˆ",name:"preview"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"markdown-preview",innerHTML:b.value},null,8,ua)]),_:1})]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)(z.fR)),(0,o.Lk)("div",ia,[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:Y},{default:(0,o.k6)(()=>[(0,o.eW)("ä¿å­˜")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{onClick:a[5]||(a[5]=e=>s.value=!1)},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1})])])]),_:1},8,["modelValue"]),c.value?((0,o.uX)(),(0,o.Wv)(we,{key:0,"current-vocabulary":w(),onClose:a[7]||(a[7]=e=>c.value=!1)},null,8,["current-vocabulary"])):(0,o.Q3)("",!0)],64))}};const ca=(0,v.A)(sa,[["__scopeId","data-v-7b8381dd"]]);var da=ca,pa={__name:"LearnVocabularyView",setup(e){return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[(0,o.bF)(da,{type:"learn"})]),_:1}))}};const va=pa;var ma=va,ka={__name:"ReviewVocabularyView",setup(e){return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[(0,o.bF)(da,{type:"review"})]),_:1}))}};const fa=ka;var ba=fa;const ya=[{path:"/vocabulary",name:"vocabulary",component:X,meta:{requiresAuth:!0}},{path:"/card",name:"card",component:da,meta:{requiresAuth:!0}},{path:"/learn",name:"learn",component:ma,meta:{requiresAuth:!0}},{path:"/review",name:"review",component:ba,meta:{requiresAuth:!0}}];var ga=ya,Ra=t(2006);const _a={class:"login-container"},ha={key:0,style:{color:"red","margin-bottom":"10px","margin-left":"100px"}};var wa={__name:"LoginView",setup(e){const a=(0,n.KR)("http://127.0.0.1:8080");null!==localStorage.getItem("server_link")&&(a.value=localStorage.getItem("server_link"));const t=(0,n.KR)(""),r=(0,n.KR)(""),s=(0,n.KR)(!1),c=(0,n.KR)(""),d=(0,u.Pj)(),p=(0,i.rd)(),v=async()=>{const e=await d.dispatch("login",{serverLink:a.value,username:t.value,password:r.value});!0===e?(s.value=!1,await p.push({name:"home"})):(s.value=!0,c.value=e)},m=async()=>{await p.push({name:"register"})};return(e,u)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",_a,[(0,o.bF)((0,n.R1)(Ra.US),{ref:"loginForm","label-width":"80px"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"Server Link",prop:"serverLink",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=e=>a.value=e),placeholder:"è¯·è¾“å…¥æœåŠ¡å™¨åœ°å€"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"Username",prop:"username",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:t.value,"onUpdate:modelValue":u[1]||(u[1]=e=>t.value=e),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"Password",prop:"password",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{type:"password",modelValue:r.value,"onUpdate:modelValue":u[2]||(u[2]=e=>r.value=e),onKeyup:(0,l.jR)(v,["enter"]),placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["modelValue"])]),_:1}),s.value?((0,o.uX)(),(0,o.CE)("div",ha,(0,F.v_)(c.value),1)):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(Ra.xE),{class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:v,class:"login-button"},{default:(0,o.k6)(()=>[(0,o.eW)("Login")]),_:1})]),_:1}),(0,o.Lk)("p",{onClick:m,style:{"margin-left":"80px",color:"#0477fa"}},"æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»æ³¨å†Œ")]),_:1},512)])]),_:1}))}};const Fa=(0,v.A)(wa,[["__scopeId","data-v-39c5c546"]]);var Va=Fa;const Ca={class:"register-container"},xa={key:0,style:{color:"red","margin-bottom":"10px","margin-left":"100px"}},Sa={key:2,style:{"margin-left":"80px",color:"#0477fa"}};var Wa={__name:"RegisterView",setup(e){const a=(0,u.Pj)(),t=(0,n.KR)("http://127.0.0.1:8080"),r=(0,n.KR)(""),s=(0,n.KR)(""),c=(0,n.KR)(""),d=(0,n.KR)(""),p=(0,n.KR)(""),v=(0,n.KR)(!1),m=(0,n.KR)(""),k=(0,n.KR)(!1),f=(0,n.KR)(""),b=async()=>{if(d.value!==p.value)return v.value=!0,void(m.value="ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´");const e=await a.dispatch("register",{serverLink:t.value,username:r.value,email:s.value,avatar:c.value,password:d.value,confirm_password:p.value});!0===e?(v.value=!1,k.value=!0,f.value="æ³¨å†ŒæˆåŠŸ, å³å°†è‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢",setTimeout(()=>{g()},2e3)):(v.value=!0,m.value=e)},y=(0,i.rd)(),g=()=>{y.push({name:"login"})};return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",Ca,[(0,o.bF)((0,n.R1)(Ra.US),{ref:"registerForm","label-width":"80px"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"æœåŠ¡å™¨",prop:"serverLink",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"è¯·è¾“å…¥åå°æœåŠ¡å™¨åœ°å€"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"ç”¨æˆ·å",prop:"username",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=e=>r.value=e),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"é‚®ç®±",prop:"email",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value=e),placeholder:"è¯·è¾“å…¥é‚®ç®±"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å¤´åƒ",prop:"avatar",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:c.value,"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),placeholder:"è¯·è¾“å…¥é‚®ç®±"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å¯†ç ",prop:"password",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{type:"password",modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=e=>d.value=e),placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword",class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{type:"password",modelValue:p.value,"onUpdate:modelValue":a[5]||(a[5]=e=>p.value=e),onKeyup:(0,l.jR)(b,["enter"]),placeholder:"è¯·ç¡®è®¤å¯†ç "},null,8,["modelValue"])]),_:1}),v.value?((0,o.uX)(),(0,o.CE)("div",xa,(0,F.v_)(m.value),1)):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)(Ra.xE),{class:"form-item"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:b,class:"register-button"},{default:(0,o.k6)(()=>[(0,o.eW)("æ³¨å†Œ")]),_:1})]),_:1}),k.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("p",{key:1,onClick:g,style:{"margin-left":"80px",color:"#04eefa"}},"å·²æœ‰è´¦å·ï¼Ÿç‚¹å‡»ç™»å½•")),k.value?((0,o.uX)(),(0,o.CE)("p",Sa,(0,F.v_)(f.value),1)):(0,o.Q3)("",!0)]),_:1},512)])]),_:1}))}};const La=(0,v.A)(Wa,[["__scopeId","data-v-c4712e08"]]);var Ka=La;const Aa=[{path:"/login",name:"login",component:Va,beforeEnter:(e,a,t)=>{t(e=>{e.$nextTick(()=>{e.$refs.loginMenuItem.focus()})})}},{path:"/register",name:"register",component:Ka}];var Ia=Aa,Ea=t(236),Ua=t(4880),Xa=t(6844),ja=t(7111),$a=t(9267),Pa=t(850),Ta=t(8430);async function za(){try{const e=localStorage.getItem("server_link"),a=localStorage.getItem("token"),t=await A.A.get(e+"/vocabulary_set/count",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return t.data}catch(e){console.error("Error fetching data from backend:",e)}}async function Qa(e,a){try{const t=localStorage.getItem("server_link"),l=localStorage.getItem("token"),o=t+"/vocabulary_set/list/"+e+"/"+a,n=await A.A.get(o,{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});return n.data}catch(t){console.error("Error fetching data from backend:",t)}}function Ma(e){return"text/plain"===e.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type?e.size>10485760?{code:1,message:"æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡10M"}:{code:0,message:"success"}:{code:1,message:"æ–‡ä»¶æ ¼å¼é”™è¯¯"}}async function Ba(e,a,t,l){try{const o=localStorage.getItem("token"),n=localStorage.getItem("server_link"),r=n+"/vocabulary_set/update",u=await A.A.put(r,{id:e,title:a,category:t,created_at:l},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return u.data}catch(o){console.error("Error fetching data from backend:",o)}}async function qa(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=a+"/vocabulary_set/delete/"+e,o=await A.A.delete(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}var Oa=t(1576),Da=t.n(Oa);const Za=e=>{const a=e["date_to_review"].toString();return a.substring(0,4)+"-"+a.substring(4,6)+"-"+a.substring(6)},Ha=(e,a)=>Da()(e[a.property]).format("YYYY-MM-DD HH:mm:ss");async function Ya(e,a){try{const t=localStorage.getItem("token"),l=localStorage.getItem("server_link"),o=l+"/vocabulary_set/add",n=await A.A.post(o,{title:e,category:a},{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return n.data}catch(t){console.error("Error fetching data from backend:",t)}}const Ja=e=>((0,o.Qi)("data-v-737ef101"),e=e(),(0,o.jt)(),e),Na=Ja(()=>(0,o.Lk)("br",null,null,-1)),Ga={class:"dialog-footer"},et=Ja(()=>(0,o.Lk)("div",{style:{color:"red"}}," ä¸€æ¬¡åªèƒ½ä¸Šä¼ ä¸€ä¸ª.txtæ–‡ä»¶æˆ–è€….xlsxæ–‡ä»¶ï¼Œè¯æ¡æ•°ä¸èƒ½è¶…è¿‡50ä¸‡ä¸ª ",-1)),at={class:"dialog-footer"};var tt={__name:"VocabularySetSettingView",setup(e){const a=(0,u.Pj)(),t=e=>{null!=e&&2!==e.code||(a.dispatch("logout"),location.reload())};let r=(0,n.KR)(!1),i=(0,n.KR)(null),s=(0,n.Kh)([]),c=(0,n.KR)(5),d=(0,n.KR)(1);const p=async()=>{m.value=!1;const e=await Qa(c.value,d.value);t(e),s=e.data,m.value=!0},v=async()=>{m.value=!1;const e=await Qa(c.value,d.value);t(e),s=e.data,m.value=!0},m=(0,n.KR)(!1);let k=(0,n.KR)(0);(0,o.sV)(async()=>{const e=await za();t(e),k.value=e.data;const a=await Qa(c.value,d.value);t(a),s=a.data,m.value=!0});const f=e=>{localStorage.setItem("vocabulary_set_id",e.id),Tl.push({name:"vocabulary_setting"})},b=e=>{i.value=e,r.value=!0},y=()=>{r.value=!1,location.reload()},g=async()=>{r.value=!1,m.value=!1;const e=await Ba(i.value.id,i.value.title,i.value.category,i.value.created_at);t(e),m.value=!0,location.reload()},R=async e=>{(0,j.df)({title:"åˆ é™¤è¯ä¹¦",message:"è¯ä¹¦åˆ é™¤ä¸­, è¯·ç¨ç­‰...",type:"info",duration:1e3});const a=await qa(e.id);if(t(a),0===a.code){m.value=!1;const e=await za();t(e),k.value=e.data;const a=await Qa(c.value,d.value);t(a),s=a.data,m.value=!0,(0,j.df)({title:"Success",message:"åˆ é™¤æˆåŠŸ",type:"success",duration:1e3})}},_=(0,n.KR)(!1),h=(0,n.Kh)({title:"",category:""}),w=()=>{_.value=!0},F=(0,n.KR)(!1),V=(0,n.KR)(null),x=e=>{V.value.clearFiles();const a=e[0];a.uid=(0,Ea.G$)(),V.value.handleStart(a)},S=e=>{1===e.code?(0,j.df)({title:"ä¸Šä¼ å¤±è´¥",message:e.message,type:"error",duration:1e3}):(0,j.df)({title:"Success",message:e.message,type:"success",duration:1e3}),setTimeout(()=>{location.reload()},1e3)},W=e=>{(0,j.df)({title:"Error",message:e.message,type:"error",duration:1e3})},L=()=>{F.value=!1,_.value=!1,h.title="",h.category=""},A=async()=>{if((0,j.df)({title:"æ–‡ä»¶ä¸Šä¼ ",message:"è¯ä¹¦ä¸Šä¼ ä¸­, è¯·ç¨ç­‰...",type:"info",duration:1e3}),_.value=!1,F.value=!1,m.value=!1,null!=V.value)V.value.submit();else{const e=await Ya(h.title,h.category);t(e),0===e.code?(0,j.df)({title:"Success",message:"æ·»åŠ æˆåŠŸ",type:"success",duration:1e3}):W(e)}const e=await za();t(e),k.value=e.data.data;const a=await Qa(c.value,d.value);t(a),s=a.data,m.value=!0,h.title="",h.category=""},I=localStorage.getItem("server_link"),E=(0,n.KR)(I+"/vocabulary_set/add"),U=(0,n.KR)({Authorization:"Bearer "+localStorage.getItem("token")}),X=e=>{const a=Ma(e);return 0===a.code||((0,j.df)({title:"Error",message:a.message,type:"error",duration:1e3}),!1)};return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[m.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ua.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ua.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.Up),{data:(0,n.R1)(s)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.o8),{label:"åç§°",prop:"title"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åˆ†ç±»",prop:"category"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åˆ›å»ºæ—¶é—´",prop:"created_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ›´æ–°æ—¶é—´",prop:"updated_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ“ä½œ"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>f(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("æŸ¥çœ‹è¯æ±‡")]),_:2},1032,["onClick"]),(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>b(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("ç¼–è¾‘")]),_:2},1032,["onClick"]),(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>R(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("åˆ é™¤")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),(0,o.Lk)("div",null,[(0,o.bF)((0,n.R1)(ja.aQ),{"current-page":(0,n.R1)(d),"onUpdate:currentPage":a[0]||(a[0]=e=>(0,n.i9)(d)?d.value=e:d=e),"page-size":(0,n.R1)(c),"onUpdate:pageSize":a[1]||(a[1]=e=>(0,n.i9)(c)?c.value=e:c=e),"page-sizes":[5,10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(k),onSizeChange:v,onCurrentChange:p},null,8,["current-page","page-size","total"])])]),_:1}),Na,(0,o.bF)((0,n.R1)(Ua.LK),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:w},{default:(0,o.k6)(()=>[(0,o.eW)("æ·»åŠ ")]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:(0,n.R1)(r),"onUpdate:modelValue":a[4]||(a[4]=e=>(0,n.i9)(r)?r.value=e:r=e),title:"ç¼–è¾‘è¯ä¹¦"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Ga,[(0,o.bF)((0,n.R1)(C.S2),{onClick:y},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:g},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:(0,n.R1)(i)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"æ ‡é¢˜"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:(0,n.R1)(i).title,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,n.R1)(i).title=e),onKeyup:(0,l.jR)(g,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"åˆ†ç±»"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:(0,n.R1)(i).category,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,n.R1)(i).category=e),onKeyup:(0,l.jR)(g,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:_.value,"onUpdate:modelValue":a[8]||(a[8]=e=>_.value=e),title:"æ–°å»ºè¯ä¹¦"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",at,[(0,o.bF)((0,n.R1)(C.S2),{onClick:L},{default:(0,o.k6)(()=>[(0,o.eW)("Cancel")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:A},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:h},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"æ ‡é¢˜"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:h.title,"onUpdate:modelValue":a[5]||(a[5]=e=>h.title=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"åˆ†ç±»"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:h.category,"onUpdate:modelValue":a[6]||(a[6]=e=>h.category=e),onKeyup:(0,l.jR)(A,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Pa.dI),{modelValue:F.value,"onUpdate:modelValue":a[7]||(a[7]=e=>F.value=e)},{default:(0,o.k6)(()=>[(0,o.eW)("ä¸Šä¼ æ–‡ä»¶(å¦‚ä¸ä¸Šä¼ æ–‡ä»¶ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªç©ºçš„è¯ä¹¦)")]),_:1},8,["modelValue"]),F.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ra.xE),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ta.j5),{ref_key:"upload",ref:V,"before-upload":X,action:E.value,headers:U.value,data:{title:h.title,category:h.category},name:"file",limit:1,"on-exceed":x,"auto-upload":!1,"on-success":S},{trigger:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary"},{default:(0,o.k6)(()=>[(0,o.eW)("é€‰æ‹©æ–‡ä»¶")]),_:1})]),tip:(0,o.k6)(()=>[et]),_:1},8,["action","headers","data"])]),_:1})):(0,o.Q3)("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const lt=(0,v.A)(tt,[["__scopeId","data-v-737ef101"]]);var ot=lt,nt=t(1418),rt=t(3883);async function ut(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=a+"/vocabulary/delete/"+e,o=await A.A.delete(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}async function it(e,a,t,l){try{const o=localStorage.getItem("token"),n=localStorage.getItem("server_link"),r=n+"/vocabulary/add",u=await A.A.post(r,{vocabulary_set_id:e,vocabulary:a,meaning:t,note:l},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return u.data}catch(o){console.error("Error fetching data from backend:",o)}}const st=(0,o.Lk)("br",null,null,-1),ct={class:"block"},dt={class:"dialog-footer"},pt={class:"dialog-footer"};var vt={__name:"VocabularySettingView",setup(e){const a=parseInt(localStorage.getItem("vocabulary_set_id"));let t=(0,n.Kh)([]),r=(0,n.KR)(5),i=(0,n.KR)(1);const s=(0,u.Pj)(),c=e=>{null!=e&&2!==e.code||(s.dispatch("logout"),location.reload())},d=(0,n.KR)(!1);let p=(0,n.KR)(0);(0,o.sV)(async()=>{const e=await xe(a);c(e),p.value=e.data;const l=await Se(a,r.value,i.value);c(l),t=l.data,d.value=!0});const v=async()=>{d.value=!1;const e=await Se(a,r.value,i.value);c(e),t=e.data,d.value=!0},m=async()=>{d.value=!1;const e=await Se(a,r.value,i.value);c(e),t=e.data,d.value=!0},k=(0,n.KR)(null),f=(0,n.KR)(!1),b=async e=>{(0,j.df)({title:"åˆ é™¤æ¡ç›®",message:"æ¡ç›®åˆ é™¤ä¸­, è¯·ç¨ç­‰...",type:"info",duration:1e3});const l=await ut(e.id);if(c(l),0===l.code){d.value=!1;const e=await xe(a);c(e),p.value=e.data;const l=await Se(a,r.value,i.value);c(l),t=l.data,d.value=!0,(0,j.df)({title:"Success",message:"åˆ é™¤æˆåŠŸ",type:"success",duration:1e3})}},y=e=>{const a=e.getFullYear();return a<2e3||a>2099},g=(0,n.KR)(0),R=e=>{k.value=e;const a=e.date_to_review,t=Math.floor(a/1e4),l=Math.floor(a%1e4/100)-1,o=a%100,n=new Date(t,l,o);g.value=n.getTime(),f.value=!0},_=()=>{f.value=!1,location.reload()},h=async()=>{f.value=!1,d.value=!1;const e=new Date(g.value),a=e.getFullYear(),t=e.getMonth()+1,l=e.getDate();k.value.date_to_review=1e4*a+100*t+l;const o=await Ie(k.value.id,k.value.vocabulary,k.value.meaning,k.value.vocabulary_set_id,k.value.note,k.value.unwanted,k.value.study_count,k.value.date_to_review,k.value.created_at);c(o),d.value=!0},w=(0,n.KR)(!1),F=()=>{w.value=!0},V=(0,n.Kh)({vocabulary:"",meaning:"",note:""}),x=()=>{w.value=!1,V.vocabulary="",V.meaning="",V.note=""},S=e=>{(0,j.df)({title:"Error",message:e.message,type:"error",duration:1e3})},W=async()=>{w.value=!1,d.value=!1;const e=await it(a,V.vocabulary,V.meaning,V.note);c(e),0===e.code?(0,j.df)({title:"Success",message:"æ·»åŠ æˆåŠŸ",type:"success",duration:1e3}):S(e);const l=await xe(a);c(l),p.value=l.data.data;const o=await Se(a,r.value,i.value);c(o),t=o.data,d.value=!0,V.vocabulary="",V.meaning="",V.note=""};return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[d.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ua.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ua.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.Up),{data:(0,n.R1)(t)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.o8),{label:"å•è¯",prop:"vocabulary"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"å«ä¹‰",prop:"meaning"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"å¤‡æ³¨",prop:"note"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"ä¸æƒ³å­¦",prop:"unwanted"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"å­¦ä¹ æ¬¡æ•°",prop:"study_count"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"å¤ä¹ æ—¥æœŸ",prop:"date_to_review",formatter:(0,n.R1)(Za)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åˆ›å»ºæ—¶é—´",prop:"created_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ›´æ–°æ—¶é—´",prop:"updated_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ“ä½œ"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)($.R7),{content:"ç¼–è¾‘å•è¯æ¡ç›®",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>R(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("ç¼–è¾‘")]),_:2},1032,["onClick"])]),_:2},1024),(0,o.bF)((0,n.R1)($.R7),{content:"åˆ é™¤å•è¯æ¡ç›®",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>b(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("åˆ é™¤")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),(0,o.Lk)("div",null,[(0,o.bF)((0,n.R1)(ja.aQ),{"current-page":(0,n.R1)(i),"onUpdate:currentPage":a[0]||(a[0]=e=>(0,n.i9)(i)?i.value=e:i=e),"page-size":(0,n.R1)(r),"onUpdate:pageSize":a[1]||(a[1]=e=>(0,n.i9)(r)?r.value=e:r=e),"page-sizes":[5,10,20,50,100],background:!0,layout:"total, sizes, prev, pager, next, jumper",total:(0,n.R1)(p),onSizeChange:m,onCurrentChange:v},null,8,["current-page","page-size","total"])])]),_:1}),st,(0,o.bF)((0,n.R1)(Ua.LK),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)($.R7),{content:"æ·»åŠ æ–°å•è¯",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:F},{default:(0,o.k6)(()=>[(0,o.eW)("æ·»åŠ ")]),_:1})]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:f.value,"onUpdate:modelValue":a[8]||(a[8]=e=>f.value=e),title:"ç¼–è¾‘æ¡ç›®"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",dt,[(0,o.bF)((0,n.R1)($.R7),{content:"å–æ¶ˆç¼–è¾‘",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:_},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)($.R7),{content:"ç¡®è®¤ç¼–è¾‘",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:h},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:k.value},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"å•è¯"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:k.value.vocabulary,"onUpdate:modelValue":a[2]||(a[2]=e=>k.value.vocabulary=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å«ä¹‰"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{type:"textarea",autosize:{minRows:5},modelValue:k.value.meaning,"onUpdate:modelValue":a[3]||(a[3]=e=>k.value.meaning=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å¤‡æ³¨"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{type:"textarea",autosize:{minRows:3},modelValue:k.value.note,"onUpdate:modelValue":a[4]||(a[4]=e=>k.value.note=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Pa.dI),{modelValue:k.value.unwanted,"onUpdate:modelValue":a[5]||(a[5]=e=>k.value.unwanted=e),label:"æ ‡è®°ä¸ºä¸æƒ³å­¦",size:"large"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å­¦ä¹ æ¬¡æ•°"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(nt.lq),{modelValue:k.value.study_count,"onUpdate:modelValue":a[6]||(a[6]=e=>k.value.study_count=e),min:0,max:30},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"ä¸‹æ¬¡å¤ä¹ æ—¥æœŸ"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",ct,[(0,o.bF)((0,n.R1)(rt.MG),{modelValue:g.value,"onUpdate:modelValue":a[7]||(a[7]=e=>g.value=e),"disabled-date":y,type:"date",placeholder:"é€‰æ‹©æ—¥æœŸ"},null,8,["modelValue"])])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:w.value,"onUpdate:modelValue":a[12]||(a[12]=e=>w.value=e),title:"æ–°å»ºæ¡ç›®"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",pt,[(0,o.bF)((0,n.R1)($.R7),{content:"å–æ¶ˆæ·»åŠ ",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:x},{default:(0,o.k6)(()=>[(0,o.eW)("Cancel")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)($.R7),{content:"ç¡®è®¤æ·»åŠ  (å¿«æ·é”®: Enter)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:W},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:V},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"å•è¯"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:V.vocabulary,"onUpdate:modelValue":a[9]||(a[9]=e=>V.vocabulary=e),onKeyup:(0,l.jR)(W,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å«ä¹‰"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:V.meaning,"onUpdate:modelValue":a[10]||(a[10]=e=>V.meaning=e),onKeyup:(0,l.jR)(W,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å¤‡æ³¨"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:V.note,"onUpdate:modelValue":a[11]||(a[11]=e=>V.note=e),onKeyup:(0,l.jR)(W,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const mt=vt;var kt=mt;async function ft(e,a,t,l){try{const o=localStorage.getItem("token"),n=localStorage.getItem("server_link"),r=n+"/dictionary/update",u=await A.A.put(r,{id:e,title:a,prefix:t,suffix:l},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});return u.data}catch(o){console.error("Error fetching data from backend:",o)}}async function bt(e,a,t){try{const l=localStorage.getItem("token"),o=localStorage.getItem("server_link"),n=o+"/dictionary/add",r=await A.A.post(n,{title:e,prefix:a,suffix:t},{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});return r.data}catch(l){console.error("Error fetching data from backend:",l)}}async function yt(e){try{const a=localStorage.getItem("server_link"),t=localStorage.getItem("token"),l=a+"/dictionary/delete/"+e,o=await A.A.delete(l,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return o.data}catch(a){console.error("Error fetching data from backend:",a)}}const gt=(0,o.Lk)("br",null,null,-1),Rt={class:"dialog-footer"},_t={class:"dialog-footer"};var ht={__name:"DictionarySettingView",setup(e){let a=(0,n.Kh)([]);const t=(0,u.Pj)(),r=e=>{null!=e&&2!==e.code||(t.dispatch("logout"),location.reload())},i=(0,n.KR)(!1);(0,o.sV)(async()=>{const e=await Ve();r(e),a=e.data,i.value=!0});const s=(0,n.KR)(null),c=(0,n.KR)(!1),d=async e=>{(0,j.df)({title:"åˆ é™¤è¯å…¸",message:"è¯å…¸åˆ é™¤ä¸­, è¯·ç¨ç­‰...",type:"info",duration:1e3});const t=await yt(e.id);if(r(t),0===t.code){i.value=!1;const e=await Ve();r(e),a=e.data,i.value=!0,(0,j.df)({title:"Success",message:"åˆ é™¤æˆåŠŸ",type:"success",duration:1e3})}},p=e=>{s.value=e,c.value=!0},v=()=>{c.value=!1,location.reload()},m=async()=>{c.value=!1,i.value=!1;const e=await ft(s.value.id,s.value.title,s.value.prefix,s.value.suffix);r(e),i.value=!0},k=(0,n.KR)(!1),f=()=>{k.value=!0},b=(0,n.Kh)({title:"",prefix:"",suffix:""}),y=()=>{k.value=!1,b.title="",b.prefix="",b.suffix=""},g=e=>{(0,j.df)({title:"Error",message:e.message,type:"error",duration:1e3})},R=async()=>{k.value=!1,i.value=!1;const e=await bt(b.title,b.prefix,b.suffix);r(e),0===e.code?(0,j.df)({title:"Success",message:"æ·»åŠ æˆåŠŸ",type:"success",duration:1e3}):g(e);const t=await Ve();r(t),a=t.data,i.value=!0,b.title="",b.prefix="",b.suffix=""};return(e,t)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[i.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ua.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ua.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.Up),{data:(0,n.R1)(a)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.o8),{label:"åç§°",prop:"title"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"å‰ç¼€",prop:"prefix"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åç¼€",prop:"suffix"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åˆ›å»ºæ—¶é—´",prop:"created_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ›´æ–°æ—¶é—´",prop:"updated_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ“ä½œ"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)($.R7),{content:"ç¼–è¾‘è¯å…¸",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>p(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("ç¼–è¾‘")]),_:2},1032,["onClick"])]),_:2},1024),(0,o.bF)((0,n.R1)($.R7),{content:"åˆ é™¤è¯å…¸",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>d(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("åˆ é™¤")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])]),_:1}),gt,(0,o.bF)((0,n.R1)(Ua.LK),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)($.R7),{content:"æ·»åŠ æ–°è¯å…¸",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:f},{default:(0,o.k6)(()=>[(0,o.eW)("æ·»åŠ ")]),_:1})]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:c.value,"onUpdate:modelValue":t[3]||(t[3]=e=>c.value=e),title:"ç¼–è¾‘è¯å…¸"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Rt,[(0,o.bF)((0,n.R1)($.R7),{content:"å–æ¶ˆç¼–è¾‘",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:v},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)($.R7),{content:"ç¡®è®¤ç¼–è¾‘ (å¿«æ·é”®: Enter)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:m},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:s.value},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"åç§°"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:s.value.title,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value.title=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å‰ç¼€"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:s.value.prefix,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.prefix=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"åç¼€"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:s.value.suffix,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.suffix=e),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:k.value,"onUpdate:modelValue":t[7]||(t[7]=e=>k.value=e),title:"æ·»åŠ è¯å…¸"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",_t,[(0,o.bF)((0,n.R1)($.R7),{content:"å–æ¶ˆæ·»åŠ ",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:y},{default:(0,o.k6)(()=>[(0,o.eW)("Cancel")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)($.R7),{content:"ç¡®è®¤æ·»åŠ  (å¿«æ·é”®: Enter)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:R},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:b},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"åç§°"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:b.title,"onUpdate:modelValue":t[4]||(t[4]=e=>b.title=e),onKeyup:(0,l.jR)(R,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å‰ç¼€"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:b.prefix,"onUpdate:modelValue":t[5]||(t[5]=e=>b.prefix=e),onKeyup:(0,l.jR)(R,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"åç¼€"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:b.suffix,"onUpdate:modelValue":t[6]||(t[6]=e=>b.suffix=e),onKeyup:(0,l.jR)(R,["enter"]),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const wt=ht;var Ft=wt;const Vt=async e=>{try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+`/llm/delete/${e}`,o=await A.A.delete(l,{headers:{Authorization:`Bearer ${a}`}});return o.data}catch(a){return console.error("åˆ é™¤LLMæœåŠ¡å‡ºé”™:",a),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},Ct=async(e,a)=>{try{const t=localStorage.getItem("token"),l=localStorage.getItem("server_link"),o=l+`/llm/update/${e}`,n=await A.A.put(o,a,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return n.data}catch(t){return console.error("æ›´æ–°LLMæœåŠ¡å‡ºé”™:",t),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},xt=async e=>{try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/llm/add",o={...e,endpoint:e.endpoint,api_key:e.api_key},n=await A.A.post(l,o,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return n.data}catch(a){return console.error("æ·»åŠ LLMæœåŠ¡å‡ºé”™:",a),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}};var St=t(2933),Wt=t(2687);const Lt={class:"dialog-footer"};var Kt={__name:"LLMServiceSettingView",setup(e){const a=(0,u.Pj)(),t=e=>{null!=e&&2!==e.code||(a.dispatch("logout"),location.reload())},l=(0,n.KR)(!1),r=(0,n.Kh)([]),i=(0,n.KR)(!1),s=(0,n.KR)(!1),c=(0,n.KR)(null),d=(0,n.Kh)({id:null,name:"",provider:"",endpoint:"",model:"",api_key:"",description:"",is_default:!1}),p={name:[{required:!0,message:"è¯·è¾“å…¥æœåŠ¡åç§°",trigger:"blur"}],endpoint:[{required:!0,message:"è¯·è¾“å…¥APIç«¯ç‚¹",trigger:"blur"}],model:[{required:!0,message:"è¯·è¾“å…¥æ¨¡å‹åç§°",trigger:"blur"}],api_key:[{required:!0,message:"è¯·è¾“å…¥API Key",trigger:"blur"}]},v=(0,o.EW)(()=>s.value?"ç¼–è¾‘LLMæœåŠ¡":"æ·»åŠ LLMæœåŠ¡");(0,o.sV)(async()=>{await m()});const m=async()=>{l.value=!1;try{const e=await ce();t(e),0===e.code&&r.splice(0,r.length,...e.data)}catch(e){(0,j.df)({title:"é”™è¯¯",message:"åŠ è½½æœåŠ¡åˆ—è¡¨å¤±è´¥",type:"error"})}finally{l.value=!0}},k=()=>{s.value=!1,g(),i.value=!0},f=e=>{s.value=!0,Object.assign(d,e),i.value=!0},b=async e=>{try{await St.s.confirm(`ç¡®è®¤åˆ é™¤æœåŠ¡ "${e.name}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const a=await Vt(e.id);t(a),0===a.code&&((0,j.df)({title:"æˆåŠŸ",message:"æœåŠ¡åˆ é™¤æˆåŠŸ",type:"success"}),await m())}catch(a){"cancel"!==a&&(0,j.df)({title:"é”™è¯¯",message:"åˆ é™¤æœåŠ¡å¤±è´¥",type:"error"})}},y=async e=>{try{const a=await Ct(e.id,{is_default:!0});t(a),0===a.code&&((0,j.df)({title:"æˆåŠŸ",message:"é»˜è®¤æœåŠ¡è®¾ç½®æˆåŠŸ",type:"success"}),await m())}catch(a){(0,j.df)({title:"é”™è¯¯",message:"è®¾ç½®é»˜è®¤æœåŠ¡å¤±è´¥",type:"error"})}},g=()=>{Object.assign(d,{id:null,name:"",provider:"",endpoint:"",model:"",api_key:"",description:"",is_default:!1}),(0,o.dY)(()=>{c.value?.clearValidate()})},R=()=>{i.value=!1,g()},_=async()=>{if(c.value)try{let e;await c.value.validate(),(0,j.df)({title:"å¤„ç†ä¸­",message:(s.value?"æ›´æ–°":"æ·»åŠ ")+"æœåŠ¡ä¸­...",type:"info"}),e=s.value?await Ct(d.id,d):await xt(d),t(e),0===e.code&&((0,j.df)({title:"æˆåŠŸ",message:(s.value?"æ›´æ–°":"æ·»åŠ ")+"æœåŠ¡æˆåŠŸ",type:"success"}),i.value=!1,g(),await m())}catch(e){e.errors?ue.nk.warning("è¯·å®Œå–„è¡¨å•ä¿¡æ¯"):(0,j.df)({title:"é”™è¯¯",message:(s.value?"æ›´æ–°":"æ·»åŠ ")+"æœåŠ¡å¤±è´¥",type:"error"})}};return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[l.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ua.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ua.bZ),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:k},{default:(0,o.k6)(()=>[(0,o.eW)("æ·»åŠ LLMæœåŠ¡")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(Ua.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.Up),{data:r,"empty-text":"æš‚æ— LLMæœåŠ¡é…ç½®"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.o8),{label:"æœåŠ¡åç§°",prop:"name"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æä¾›å•†",prop:"provider"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"APIç«¯ç‚¹",prop:"endpoint"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ¨¡å‹",prop:"model"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ˜¯å¦é»˜è®¤"},{default:(0,o.k6)(e=>[e.row.is_default?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Wt.u),{key:0,type:"success"},{default:(0,o.k6)(()=>[(0,o.eW)("é»˜è®¤")]),_:1})):((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:1,type:"text",onClick:a=>y(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("è®¾ä¸ºé»˜è®¤")]),_:2},1032,["onClick"]))]),_:1}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æè¿°",prop:"description"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åˆ›å»ºæ—¶é—´",prop:"created_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ“ä½œ"},{default:(0,o.k6)(e=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>f(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("ç¼–è¾‘")]),_:2},1032,["onClick"]),(0,o.bF)((0,n.R1)(C.S2),{onClick:a=>b(e.row),type:"danger"},{default:(0,o.k6)(()=>[(0,o.eW)("åˆ é™¤")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=e=>i.value=e),title:v.value},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Lt,[(0,o.bF)((0,n.R1)(C.S2),{onClick:R},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:_},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:d,rules:p,ref_key:"serviceFormRef",ref:c},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"æœåŠ¡åç§°",prop:"name"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.name,"onUpdate:modelValue":a[0]||(a[0]=e=>d.name=e),placeholder:"è¯·è¾“å…¥æœåŠ¡åç§°"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"æœåŠ¡æä¾›å•†"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.provider,"onUpdate:modelValue":a[1]||(a[1]=e=>d.provider=e),placeholder:"è¯·è¾“å…¥æœåŠ¡æä¾›å•†"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"APIç«¯ç‚¹",prop:"endpoint"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.endpoint,"onUpdate:modelValue":a[2]||(a[2]=e=>d.endpoint=e),placeholder:"è¯·è¾“å…¥APIç«¯ç‚¹URL"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"æ¨¡å‹åç§°",prop:"model"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.model,"onUpdate:modelValue":a[3]||(a[3]=e=>d.model=e),placeholder:"è¯·è¾“å…¥æ¨¡å‹åç§°"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"API Key",prop:"api_key"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.api_key,"onUpdate:modelValue":a[4]||(a[4]=e=>d.api_key=e),type:"password",placeholder:"è¯·è¾“å…¥API Key","show-password":""},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"æœåŠ¡æè¿°"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.description,"onUpdate:modelValue":a[5]||(a[5]=e=>d.description=e),type:"textarea",placeholder:"è¯·è¾“å…¥æœåŠ¡æè¿°",rows:3},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Pa.dI),{modelValue:d.is_default,"onUpdate:modelValue":a[6]||(a[6]=e=>d.is_default=e)},{default:(0,o.k6)(()=>[(0,o.eW)("è®¾ä¸ºé»˜è®¤æœåŠ¡")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}))}};const At=(0,v.A)(Kt,[["__scopeId","data-v-71c2e9f5"]]);var It=At;const Et=async e=>{try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+`/aiprompt/delete/${e}`,o=await A.A.delete(l,{headers:{Authorization:`Bearer ${a}`}});return o.data}catch(a){return console.error("åˆ é™¤AIæç¤ºè¯å‡ºé”™:",a),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},Ut=async(e,a)=>{try{const t=localStorage.getItem("token"),l=localStorage.getItem("server_link"),o=l+`/aiprompt/update/${e}`,n=await A.A.put(o,a,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});return n.data}catch(t){return console.error("æ›´æ–°AIæç¤ºè¯å‡ºé”™:",t),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},Xt=async e=>{try{const a=localStorage.getItem("token"),t=localStorage.getItem("server_link"),l=t+"/aiprompt/add",o=await A.A.post(l,e,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});return o.data}catch(a){return console.error("æ·»åŠ AIæç¤ºè¯å‡ºé”™:",a),{code:1,message:"ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}}},jt={class:"dialog-footer"};var $t={__name:"AIPromptSettingView",setup(e){const a=(0,u.Pj)(),t=e=>{null!=e&&2!==e.code||(a.dispatch("logout"),location.reload())},l=(0,n.KR)(!1),r=(0,n.Kh)([]),i=(0,n.KR)(!1),s=(0,n.KR)(!1),c=(0,n.KR)(null),d=(0,n.Kh)({id:null,name:"",description:"",content:"",is_default:!1}),p={name:[{required:!0,message:"è¯·è¾“å…¥æç¤ºè¯åç§°",trigger:"blur"}],content:[{required:!0,message:"è¯·è¾“å…¥æç¤ºè¯å†…å®¹",trigger:"blur"}]},v=(0,o.EW)(()=>s.value?"ç¼–è¾‘AIæç¤ºè¯":"æ·»åŠ AIæç¤ºè¯"),m=e=>0!==e.user_id;(0,o.sV)(async()=>{await k()});const k=async()=>{l.value=!1;try{const e=await ie();t(e),0===e.code&&r.splice(0,r.length,...e.data)}catch(e){(0,j.df)({title:"é”™è¯¯",message:"åŠ è½½æç¤ºè¯åˆ—è¡¨å¤±è´¥",type:"error"})}finally{l.value=!0}},f=()=>{s.value=!1,R(),i.value=!0},b=e=>{m(e)?(s.value=!0,Object.assign(d,e),i.value=!0):ue.nk.warning("ç³»ç»Ÿé»˜è®¤æç¤ºè¯ä¸å¯ç¼–è¾‘")},y=async e=>{if(m(e))try{await St.s.confirm(`ç¡®è®¤åˆ é™¤æç¤ºè¯ "${e.name}" å—ï¼Ÿ`,"åˆ é™¤ç¡®è®¤",{confirmButtonText:"ç¡®è®¤",cancelButtonText:"å–æ¶ˆ",type:"warning"});const a=await Et(e.id);t(a),0===a.code&&((0,j.df)({title:"æˆåŠŸ",message:"æç¤ºè¯åˆ é™¤æˆåŠŸ",type:"success"}),await k())}catch(a){"cancel"!==a&&(0,j.df)({title:"é”™è¯¯",message:"åˆ é™¤æç¤ºè¯å¤±è´¥",type:"error"})}else ue.nk.warning("ç³»ç»Ÿé»˜è®¤æç¤ºè¯ä¸å¯åˆ é™¤")},g=async e=>{try{const a=await Ut(e.id,{is_default:!0});t(a),0===a.code&&((0,j.df)({title:"æˆåŠŸ",message:"é»˜è®¤æç¤ºè¯è®¾ç½®æˆåŠŸ",type:"success"}),await k())}catch(a){(0,j.df)({title:"é”™è¯¯",message:"è®¾ç½®é»˜è®¤æç¤ºè¯å¤±è´¥",type:"error"})}},R=()=>{Object.assign(d,{id:null,name:"",description:"",content:"",is_default:!1}),(0,o.dY)(()=>{c.value?.clearValidate()})},_=()=>{i.value=!1,R()},h=async()=>{if(c.value)try{let e;await c.value.validate(),(0,j.df)({title:"å¤„ç†ä¸­",message:(s.value?"æ›´æ–°":"æ·»åŠ ")+"æç¤ºè¯ä¸­...",type:"info"}),e=s.value?await Ut(d.id,d):await Xt(d),t(e),0===e.code&&((0,j.df)({title:"æˆåŠŸ",message:(s.value?"æ›´æ–°":"æ·»åŠ ")+"æç¤ºè¯æˆåŠŸ",type:"success"}),i.value=!1,R(),await k())}catch(e){e.errors?ue.nk.warning("è¯·å®Œå–„è¡¨å•ä¿¡æ¯"):(0,j.df)({title:"é”™è¯¯",message:(s.value?"æ›´æ–°":"æ·»åŠ ")+"æç¤ºè¯å¤±è´¥",type:"error"})}};return(e,a)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[l.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Ua.lX),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ua.bZ),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:f},{default:(0,o.k6)(()=>[(0,o.eW)("æ·»åŠ AIæç¤ºè¯")]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(Ua.ZO),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.Up),{data:r,"empty-text":"æš‚æ— AIæç¤ºè¯é…ç½®"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Xa.o8),{label:"æç¤ºè¯åç§°",prop:"name"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æè¿°",prop:"description"}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ˜¯å¦é»˜è®¤"},{default:(0,o.k6)(e=>[e.row.is_default?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Wt.u),{key:0,type:"success"},{default:(0,o.k6)(()=>[(0,o.eW)("é»˜è®¤")]),_:1})):((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:1,type:"text",onClick:a=>g(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("è®¾ä¸ºé»˜è®¤")]),_:2},1032,["onClick"]))]),_:1}),(0,o.bF)((0,n.R1)(Xa.o8),{label:"åˆ›å»ºæ—¶é—´",prop:"created_at",formatter:(0,n.R1)(Ha)},null,8,["formatter"]),(0,o.bF)((0,n.R1)(Xa.o8),{label:"æ“ä½œ"},{default:(0,o.k6)(e=>[m(e.row)?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:0,onClick:a=>b(e.row)},{default:(0,o.k6)(()=>[(0,o.eW)("ç¼–è¾‘")]),_:2},1032,["onClick"])):(0,o.Q3)("",!0),m(e.row)?((0,o.uX)(),(0,o.Wv)((0,n.R1)(C.S2),{key:1,onClick:a=>y(e.row),type:"danger"},{default:(0,o.k6)(()=>[(0,o.eW)("åˆ é™¤")]),_:2},1032,["onClick"])):(0,o.Q3)("",!0)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:i.value,"onUpdate:modelValue":a[4]||(a[4]=e=>i.value=e),title:v.value,width:"800px"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",jt,[(0,o.bF)((0,n.R1)(C.S2),{onClick:_},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:h},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:d,rules:p,ref_key:"promptFormRef",ref:c},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"æç¤ºè¯åç§°",prop:"name"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.name,"onUpdate:modelValue":a[0]||(a[0]=e=>d.name=e),placeholder:"è¯·è¾“å…¥æç¤ºè¯åç§°"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"æç¤ºè¯æè¿°"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.description,"onUpdate:modelValue":a[1]||(a[1]=e=>d.description=e),placeholder:"è¯·è¾“å…¥æç¤ºè¯æè¿°ï¼ˆå¯é€‰ï¼‰"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"æç¤ºè¯å†…å®¹",prop:"content"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:d.content,"onUpdate:modelValue":a[2]||(a[2]=e=>d.content=e),type:"textarea",placeholder:"è¯·è¾“å…¥æç¤ºè¯å†…å®¹",rows:8,resize:"vertical"},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Pa.dI),{modelValue:d.is_default,"onUpdate:modelValue":a[3]||(a[3]=e=>d.is_default=e)},{default:(0,o.k6)(()=>[(0,o.eW)("è®¾ä¸ºé»˜è®¤æç¤ºè¯")]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])]),_:1}))}};const Pt=(0,v.A)($t,[["__scopeId","data-v-93a92fd2"]]);var Tt=Pt,zt=t(4418),Qt=t(7962),Mt=t(2357),Bt=t(5558),qt=t(3275);async function Ot(e,a,t,l,o,n,r,u,i,s){try{const c=localStorage.getItem("token"),d=localStorage.getItem("server_link"),p=d+"/user/update",v=await A.A.put(p,{username:e,email:a,avatar:t,current_vocabulary_set_id:l,daily_count:o,times_counted_as_known:n,review_frequency_formula:r,llm_service_provider:u,llm_token:i,llm_model:s},{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});return console.log("æ›´æ–°ç”¨æˆ·å“åº”:",v.data),v.data}catch(c){return console.error("æ›´æ–°ç”¨æˆ·æ—¶å‘ç”Ÿé”™è¯¯:",c),c.response&&(console.error("é”™è¯¯å“åº”æ•°æ®:",c.response.data),console.error("é”™è¯¯çŠ¶æ€ç :",c.response.status)),c.response?c.response.data:{code:1,message:"ç½‘ç»œé”™è¯¯"}}}const Dt={class:"dialog-footer"};var Zt={__name:"UserSettingView",setup(e){let a=(0,n.Kh)([]),t=(0,n.Kh)({id:0,title:""});const l=e=>{for(let l of a)if(l.id===e){t.id=l.id,t.title=l.title,r.currentVocabularySetID=l.id;break}};let r=(0,n.Kh)({username:"",email:"",avatar:"",currentVocabularySetID:0,dailyCount:0,timesCountedAsKnown:0,reviewFrequencyFormula:""});const i=(0,u.Pj)(),s=(0,n.KR)(!1),c=e=>{null!=e&&2!==e.code||(i.dispatch("logout"),location.reload())};(0,o.sV)(async()=>{s.value=!1;const e=await Fe();c(e),r.username=e.username,r.email=e.email,r.avatar=e.avatar,r.currentVocabularySetID=e.current_vocabulary_set_id,r.dailyCount=e.daily_count,r.timesCountedAsKnown=e.times_counted_as_known,r.reviewFrequencyFormula=e.review_frequency_formula;const l=await Qa(1e8,1);c(l),a=l.data;for(let o of a)if(o.id===r.currentVocabularySetID){t.id=o.id,t.title=o.title;break}s.value=!0});const d=(0,n.KR)(!1),p=()=>{d.value=!0},v=()=>{d.value=!1,location.reload()},m=async()=>{d.value=!1,s.value=!1;const e=await Ot(r.username,r.email,r.avatar,+r.currentVocabularySetID,r.dailyCount,r.timesCountedAsKnown,r.reviewFrequencyFormula);if(e&&0===e.code)c(e),s.value=!0,ue.nk.success("ç”¨æˆ·ä¿¡æ¯æ›´æ–°æˆåŠŸ"),setTimeout(()=>{location.reload()},1e3);else{d.value=!0,s.value=!0;const a=e?e.message:"æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•";ue.nk.error(a)}},{isDark:k}=R();return(e,u)=>((0,o.uX)(),(0,o.Wv)(K,null,{default:(0,o.k6)(()=>[s.value?((0,o.uX)(),(0,o.Wv)((0,n.R1)(V.Ik),{key:0},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(zt.S2),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Qt.uD),{span:9},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Mt.zv),{size:120,src:(0,n.R1)(r).avatar},null,8,["src"])]),_:1}),(0,o.bF)((0,n.R1)(Qt.uD),{span:16},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(zt.S2),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Qt.uD),{span:12},{default:(0,o.k6)(()=>[(0,o.Lk)("h2",null,(0,F.v_)((0,n.R1)(r).username),1)]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(zt.S2),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Qt.uD),{span:24},{default:(0,o.k6)(()=>[(0,o.Lk)("p",null,[(0,o.eW)("Email: "),(0,o.Lk)("b",null,(0,F.v_)((0,n.R1)(r).email),1)]),(0,o.Lk)("p",null,[(0,o.eW)("å½“å‰æ‰€å­¦è¯­ä¹¦: "),(0,o.Lk)("b",null,(0,F.v_)((0,n.R1)(t).title),1)]),(0,o.Lk)("p",null,[(0,o.eW)("æ¯æ—¥æ–°å•è¯æ•°: "),(0,o.Lk)("b",null,(0,F.v_)((0,n.R1)(r).dailyCount),1)]),(0,o.Lk)("p",null,[(0,o.eW)("å¤ä¹ é¢‘ç‡å…¬å¼: "),(0,o.Lk)("b",null,(0,F.v_)((0,n.R1)(r).reviewFrequencyFormula),1)]),(0,o.Lk)("p",null,[(0,o.eW)("ç‚¹å‡»å‡ æ¬¡â€œè®¤è¯†â€ç®—å­¦ä¼š: "),(0,o.Lk)("b",null,(0,F.v_)((0,n.R1)(r).timesCountedAsKnown),1)]),(0,o.Lk)("p",null,[(0,o.eW)(" ä¸»é¢˜: "),(0,o.bF)((0,n.R1)(Bt.qi),{modelValue:(0,n.R1)(k),"onUpdate:modelValue":u[0]||(u[0]=e=>(0,n.i9)(k)?k.value=e:null),class:"mt-2",style:{"margin-left":"24px"},"inline-prompt":"","active-icon":(0,n.R1)(B.Il7),"inactive-icon":(0,n.R1)(B.AX$)},null,8,["modelValue","active-icon","inactive-icon"])]),(0,o.bF)((0,n.R1)(C.S2),{onClick:u[1]||(u[1]=e=>p())},{default:(0,o.k6)(()=>[(0,o.eW)("ä¿®æ”¹")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:d.value,"onUpdate:modelValue":u[8]||(u[8]=e=>d.value=e),title:"ä¿®æ”¹è®¾ç½®"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",Dt,[(0,o.bF)((0,n.R1)(C.S2),{onClick:v},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:m},{default:(0,o.k6)(()=>[(0,o.eW)("ç¡®è®¤")]),_:1})])]),default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.US),{model:(0,n.R1)(r)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"ç”¨æˆ·å"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:(0,n.R1)(r).username,"onUpdate:modelValue":u[2]||(u[2]=e=>(0,n.R1)(r).username=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"é‚®ç®±"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:(0,n.R1)(r).email,"onUpdate:modelValue":u[3]||(u[3]=e=>(0,n.R1)(r).email=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å¤´åƒ"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:(0,n.R1)(r).avatar,"onUpdate:modelValue":u[4]||(u[4]=e=>(0,n.R1)(r).avatar=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å½“å‰æ‰€å­¦è¯ä¹¦"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(qt.dW),{"split-button":"",type:"primary"},{dropdown:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(qt.Iy),null,{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,n.R1)(a),e=>((0,o.uX)(),(0,o.Wv)((0,n.R1)(qt.c6),{key:e.id,onClick:a=>l(e.id)},{default:(0,o.k6)(()=>[(0,o.eW)((0,F.v_)(e.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:(0,o.k6)(()=>[(0,o.eW)((0,F.v_)((0,n.R1)(t).title||"é€‰æ‹©è¯ä¹¦")+" ",1)]),_:1})]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"æ¯æ—¥æ–°å•è¯æ•°"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(nt.lq),{modelValue:(0,n.R1)(r).dailyCount,"onUpdate:modelValue":u[5]||(u[5]=e=>(0,n.R1)(r).dailyCount=e),min:1,max:1e3},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"å¤ä¹ é¢‘ç‡å…¬å¼"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(M.WK),{modelValue:(0,n.R1)(r).reviewFrequencyFormula,"onUpdate:modelValue":u[6]||(u[6]=e=>(0,n.R1)(r).reviewFrequencyFormula=e)},null,8,["modelValue"])]),_:1}),(0,o.bF)((0,n.R1)(Ra.xE),{label:"ç‚¹å‡»å‡ æ¬¡â€œè®¤è¯†â€ç®—å­¦ä¼š"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(nt.lq),{modelValue:(0,n.R1)(r).timesCountedAsKnown,"onUpdate:modelValue":u[7]||(u[7]=e=>(0,n.R1)(r).timesCountedAsKnown=e),min:1,max:1e3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1}))}};const Ht=Zt;var Yt=Ht;const Jt=[{path:"/setting",name:"setting",redirect:"/setting/vocabulary_set",meta:{requiresAuth:!0},children:[{path:"vocabulary_set",name:"vocabulary_set_setting",component:ot},{path:"vocabulary",name:"vocabulary_setting",component:kt,props:!0},{path:"dictionary",name:"dictionary_setting",component:Ft},{path:"llm",name:"llm_setting",component:It},{path:"aiprompt",name:"aiprompt_setting",component:Tt},{path:"user",name:"user_setting",component:Yt}]}];var Nt=Jt,Gt=t(6810);const el=e=>((0,o.Qi)("data-v-ee6a0f54"),e=e(),(0,o.jt)(),e),al={class:"query-container"},tl={class:"search-section"},ll={key:0,class:"results-section"},ol={class:"card-header"},nl={class:"vocabulary-title"},rl={class:"header-actions"},ul={key:0,class:"loading-container"},il=["innerHTML"],sl={key:2,class:"no-meaning"},cl={key:1,class:"welcome-section"},dl=el(()=>(0,o.Lk)("h2",null,"å•è¯æŸ¥è¯¢å·¥å…·",-1)),pl=el(()=>(0,o.Lk)("p",null,"åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥è¦æŸ¥è¯¢çš„å•è¯ï¼ŒæŒ‰å›è½¦æˆ–ç‚¹å‡»æœç´¢æŒ‰é’®è¿›è¡ŒæŸ¥è¯¢",-1)),vl=el(()=>(0,o.Lk)("p",{class:"shortcuts"},"å¿«æ·é”®è¯´æ˜ï¼š",-1)),ml=el(()=>(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,[(0,o.Lk)("strong",null,"Enter"),(0,o.eW)(" - æœç´¢å•è¯")]),(0,o.Lk)("li",null,[(0,o.Lk)("strong",null,"S"),(0,o.eW)(" - æ‰“å¼€è¯å…¸æœç´¢")]),(0,o.Lk)("li",null,[(0,o.Lk)("strong",null,"æ•°å­—é”® 1-9"),(0,o.eW)(" - åœ¨å¯¹åº”è¯å…¸ä¸­æœç´¢")])],-1)),kl={class:"dictionary-list"},fl=["onClick"],bl={key:0,class:"wiktionary-fullscreen-modal"},yl={class:"wiktionary-fullscreen-content"},gl=["src"],Rl={class:"dialog-title"},_l={class:"vocabulary-set-radio-content"},hl={class:"dialog-footer"};var wl={__name:"WordQueryView",setup(e){const a=(0,n.KR)(""),t=(0,n.KR)(""),r=(0,n.KR)(""),u=(0,n.KR)(!1),i=(0,n.KR)(!1),s=(0,n.KR)(!1),c=(0,n.KR)(!1),d=(0,n.KR)(!1),p=(0,n.KR)(!1),v=(0,n.KR)(!1),m=(0,n.KR)(""),k=(0,n.KR)([]),f=(0,n.KR)([]),b=(0,n.KR)(null),y=(0,n.KR)({});(0,o.sV)(async()=>{const e=await Ve();e&&e.data&&(k.value=e.data);const a=await Qa(1e8,1);a&&a.data&&(f.value=a.data)});const g=e=>{if(e.target.classList.contains("audio-btn")){const a=e.target.getAttribute("data-audio");a&&L(a)}},R=async()=>{if(a.value.trim()){t.value=a.value.trim(),u.value=!0,i.value=!0;try{const e=await Ke(t.value);e.success?r.value=Ae(e):r.value="Sorry, the vocabulary was not found. Please check the spelling and try again."}catch(e){console.error("Failed to fetch vocabulary definition:",e),r.value="Search failed. Please check your network connection and try again."}finally{u.value=!1}}},_=e=>{if(!c.value)if("Enter"===e.key)R();else if("s"===e.key||"S"===e.key)i.value&&(s.value=!s.value);else if("0123456789".includes(e.key)){let a=+e.key;if(0===a&&(a=10),a<=k.value.length&&i.value&&s.value){const e=k.value[a-1];window.open(e.prefix+(t.value||"")+(e.suffix||""),"_blank")}}},h=async()=>{if(a.value.trim()&&(b.value=null,y.value={},d.value=!0,f.value.length>0)){const t=a.value.trim();for(const a of f.value)try{const e=await We(t,a.id),l=e&&0===e.code&&e.data.exists;y.value[a.id]=l,l&&!b.value&&(b.value=a.id)}catch(e){console.error(`æ£€æŸ¥è¯ä¹¦ ${a.title} å¤±è´¥:`,e),y.value[a.id]=!1}}},w=()=>!!b.value&&!!y.value[b.value],x=async()=>{if(b.value&&a.value.trim())try{const e=await it(b.value,a.value.trim(),r.value||"æš‚æ— é‡Šä¹‰","");if(e&&0===e.code)ue.nk.success("æ·»åŠ å•è¯æˆåŠŸ"),d.value=!1;else{const a=e?e.message:"æ·»åŠ å¤±è´¥ï¼Œè¯·é‡è¯•";ue.nk.error(a)}}catch(e){console.error("æ·»åŠ å•è¯å¤±è´¥:",e),ue.nk.error("æ·»åŠ å•è¯å¤±è´¥ï¼Œè¯·é‡è¯•")}},S=()=>{i.value&&t.value&&(p.value=!p.value)},W=e=>{const a=e.prefix+(t.value||"")+(e.suffix||""),l=e.title.toLowerCase().includes("wiktionary"),o=window.innerWidth<=768;l&&o?(m.value=a,v.value=!0,s.value=!1):window.open(a,"_blank")};window.openWiktionaryFullscreen=e=>{v.value=!0,m.value=e};const L=e=>{try{const a=new Audio(e);a.play().catch(e=>{console.error("éŸ³é¢‘æ’­æ”¾å¤±è´¥:",e)})}catch(a){console.error("éŸ³é¢‘åŠ è½½å¤±è´¥:",a)}};return(e,c)=>{const L=(0,o.g2)("el-skeleton");return(0,o.uX)(),(0,o.Wv)(K,{onKeydown:_,tabindex:"0"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",al,[(0,o.Lk)("div",tl,[(0,o.bF)((0,n.R1)(M.WK),{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=e=>a.value=e),placeholder:"è¾“å…¥è¦æŸ¥è¯¢çš„å•è¯",size:"large",onKeyup:(0,l.jR)(R,["enter"]),class:"search-input"},{append:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{onClick:R,icon:(0,n.R1)(B.vji)},{default:(0,o.k6)(()=>[(0,o.eW)("æœç´¢")]),_:1},8,["icon"])]),_:1},8,["modelValue"])]),i.value?((0,o.uX)(),(0,o.CE)("div",ll,[(0,o.bF)((0,n.R1)(V.Ik),{class:"vocabulary-card"},{header:(0,o.k6)(()=>[(0,o.Lk)("div",ol,[(0,o.Lk)("span",nl,(0,F.v_)(t.value),1),(0,o.Lk)("div",rl,[(0,o.bF)((0,n.R1)($.R7),{content:"ä½¿ç”¨LLMæœç´¢å•è¯",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{circle:"",onClick:S},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.wUE))]),_:1})]),_:1})]),_:1}),(0,o.bF)((0,n.R1)($.R7),{content:"æ”¶è—å•è¯",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{circle:"",onClick:h,disabled:!a.value.trim(),class:"favorite-btn"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.FEq))]),_:1})]),_:1},8,["disabled"])]),_:1}),(0,o.bF)((0,n.R1)($.R7),{content:"æœç´¢è¯å…¸ (å¿«æ·é”®: S)",placement:"top"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(C.S2),{circle:"",onClick:c[1]||(c[1]=e=>s.value=!s.value)},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.vji))]),_:1})]),_:1})]),_:1})])])]),default:(0,o.k6)(()=>[(0,o.Lk)("div",{class:"vocabulary-content",onClick:g},[u.value?((0,o.uX)(),(0,o.CE)("div",ul,[(0,o.bF)(L,{rows:5,animated:""})])):r.value?((0,o.uX)(),(0,o.CE)("div",{key:1,class:"meaning",innerHTML:r.value},null,8,il)):((0,o.uX)(),(0,o.CE)("div",sl,"è¯¥å•è¯æš‚æ— é‡Šä¹‰"))])]),_:1})])):((0,o.uX)(),(0,o.CE)("div",cl,[(0,o.bF)((0,n.R1)(V.Ik),{class:"welcome-card"},{default:(0,o.k6)(()=>[dl,pl,vl,ml]),_:1})]))]),(0,o.bF)((0,n.R1)(T.pw),{modelValue:s.value,"onUpdate:modelValue":c[2]||(c[2]=e=>s.value=e),title:"è¯å…¸æœç´¢","with-header":!0},{default:(0,o.k6)(()=>[(0,o.Lk)("div",kl,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(k.value,(e,a)=>((0,o.uX)(),(0,o.CE)("p",{key:e.id,class:"dictionary-item"},[(0,o.Lk)("a",{href:"#",onClick:(0,l.D$)(a=>W(e),["prevent"]),class:(0,F.C4)({"wiktionary-link":e.title.toLowerCase().includes("wiktionary")})},[(0,o.Lk)("strong",null,(0,F.v_)(a+1)+". "+(0,F.v_)(e.title),1)],10,fl),(0,o.bF)((0,n.R1)(z.fR))]))),128))])]),_:1},8,["modelValue"]),v.value?((0,o.uX)(),(0,o.CE)("div",bl,[(0,o.Lk)("div",yl,[(0,o.Lk)("button",{class:"close-fullscreen-btn",onClick:c[3]||(c[3]=e=>v.value=!1)},[(0,o.bF)((0,n.R1)(P.tk),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(B.bm))]),_:1})]),(0,o.Lk)("iframe",{src:m.value,class:"wiktionary-fullscreen-iframe",loading:"lazy"},null,8,gl)])])):(0,o.Q3)("",!0),(0,o.bF)((0,n.R1)($a.kZ),{modelValue:d.value,"onUpdate:modelValue":c[6]||(c[6]=e=>d.value=e),title:"æ”¶è—å•è¯",width:"500px"},{footer:(0,o.k6)(()=>[(0,o.Lk)("span",hl,[(0,o.bF)((0,n.R1)(C.S2),{onClick:c[5]||(c[5]=e=>d.value=!1)},{default:(0,o.k6)(()=>[(0,o.eW)("å–æ¶ˆ")]),_:1}),(0,o.bF)((0,n.R1)(C.S2),{type:"primary",onClick:x,disabled:!b.value,class:(0,F.C4)({"warning-btn":b.value&&w()})},{default:(0,o.k6)(()=>[(0,o.eW)((0,F.v_)(b.value&&w()?"æ— éœ€é‡å¤æ·»åŠ ":"ç¡®è®¤æ·»åŠ "),1)]),_:1},8,["disabled","class"])])]),default:(0,o.k6)(()=>[(0,o.Lk)("div",Rl,[(0,o.eW)('å°†å•è¯ "'),(0,o.Lk)("strong",null,(0,F.v_)(a.value),1),(0,o.eW)('" æ·»åŠ åˆ°è¯ä¹¦')]),(0,o.bF)((0,n.R1)(Ra.US),null,{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Ra.xE),{label:"é€‰æ‹©è¯ä¹¦"},{default:(0,o.k6)(()=>[(0,o.bF)((0,n.R1)(Gt.MQ),{modelValue:b.value,"onUpdate:modelValue":c[4]||(c[4]=e=>b.value=e),class:"vocabulary-set-radio-group"},{default:(0,o.k6)(()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(f.value,e=>((0,o.uX)(),(0,o.Wv)((0,n.R1)(Gt.ll),{key:e.id,label:e.id,class:"vocabulary-set-radio"},{default:(0,o.k6)(()=>[(0,o.Lk)("div",_l,[(0,o.Lk)("span",null,(0,F.v_)(e.title),1),y.value[e.id]?((0,o.uX)(),(0,o.Wv)((0,n.R1)(Wt.u),{key:0,type:"success",size:"small",class:"exists-tag"},{default:(0,o.k6)(()=>[(0,o.eW)(" å·²å­˜åœ¨ ")]),_:1})):(0,o.Q3)("",!0)])]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),p.value?((0,o.uX)(),(0,o.Wv)(we,{key:1,"current-vocabulary":t.value,onClose:c[7]||(c[7]=e=>p.value=!1)},null,8,["current-vocabulary"])):(0,o.Q3)("",!0)]),_:1})}}};const Fl=(0,v.A)(wl,[["__scopeId","data-v-ee6a0f54"]]);var Vl=Fl;const Cl=e=>((0,o.Qi)("data-v-3a93085f"),e=e(),(0,o.jt)(),e),xl={id:"app"},Sl={class:"container"},Wl=Cl(()=>(0,o.Lk)("h1",null,"å½•éŸ³æœº",-1)),Ll={class:"controls"},Kl=["src"];function Al(e,a,t,n,r,u){return(0,o.uX)(),(0,o.CE)("div",xl,[(0,o.Lk)("div",Sl,[Wl,(0,o.Lk)("div",Ll,[(0,o.Lk)("button",{class:"btn",onClick:a[0]||(a[0]=(...e)=>u.startRecording&&u.startRecording(...e))},"å¼€å§‹å½•éŸ³"),(0,o.Lk)("button",{class:"btn",onClick:a[1]||(a[1]=(...e)=>u.stopRecording&&u.stopRecording(...e))},"åœæ­¢å½•éŸ³"),(0,o.bo)((0,o.Lk)("input",{class:"input",type:"number","onUpdate:modelValue":a[2]||(a[2]=e=>r.duration=e),placeholder:"è‡ªåŠ¨åœæ­¢æ—¶é—´ï¼ˆç§’ï¼‰"},null,512),[[l.Jo,r.duration]])]),r.countdown>0?(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:0,class:"input","onUpdate:modelValue":a[3]||(a[3]=e=>r.countdown=e),placeholder:"å‰©ä½™æ—¶é—´",readonly:""},null,512)),[[l.Jo,r.countdown]]):(0,o.Q3)("",!0),r.audioUrl?((0,o.uX)(),(0,o.CE)("audio",{key:1,src:r.audioUrl,controls:""},null,8,Kl)):(0,o.Q3)("",!0)])])}t(4603),t(7566),t(8721);var Il={data(){return{mediaRecorder:null,audioChunks:[],audioUrl:null,countdown:0,countdownInterval:null,duration:45}},methods:{async startRecording(){try{const e=await navigator.mediaDevices.getUserMedia({audio:!0});this.mediaRecorder=new MediaRecorder(e),this.audioChunks=[],this.mediaRecorder.ondataavailable=e=>{this.audioChunks.push(e.data)},this.mediaRecorder.start(),this.startCountdown(this.duration)}catch(e){console.error("Error accessing audio",e)}},stopRecording(){this.mediaRecorder.stop(),this.mediaRecorder.onstop=()=>{const e=new Blob(this.audioChunks);this.audioUrl=URL.createObjectURL(e)},this.stopCountdown()},startCountdown(e){this.countdown=e,this.countdownInterval=setInterval(()=>{this.countdown--,this.countdown<=0&&this.stopRecording()},1e3)},stopCountdown(){clearInterval(this.countdownInterval),this.countdown=0}}};const El=(0,v.A)(Il,[["render",Al],["__scopeId","data-v-3a93085f"]]);var Ul=El;const Xl=[{path:"/tool",name:"tool",children:[{path:"query",name:"query",component:Vl},{path:"record",name:"record",component:Ul}]}];var jl=Xl;const $l=[{path:"/",name:"home",redirect:"/vocabulary"},{path:"/404",name:"404",redirect:"/vocabulary"},{path:"/:pathMatch(.*)*",redirect:"/404"}],Pl=(0,i.aE)({history:(0,i.Bt)(),routes:[...ga,...Ia,...Nt,...jl,...$l]});var Tl=Pl,zl={state:{isAuthenticated:!!localStorage.getItem("token"),token:localStorage.getItem("token")||""},mutations:{setServerLink(e,a){localStorage.setItem("server_link",a)},setAuth(e,a){e.isAuthenticated=a},setToken(e,a){e.token=a,localStorage.setItem("token",a)},logout(e){e.isAuthenticated=!1,e.token=null,localStorage.removeItem("vocabulary_set_id"),localStorage.removeItem("server_link"),localStorage.removeItem("token")}},actions:{async register(e,{serverLink:a,username:t,email:l,avatar:o,password:n,confirm_password:r}){try{const e=await A.A.post(a+"/user/register",{username:t,email:l,avatar:o,password:n,confirm_password:r}),u=e.data;return 0===u.code||u.message}catch(u){return"å‘ç”Ÿäº†æœªçŸ¥é”™è¯¯, æ³¨å†Œå¤±è´¥"}},async login({commit:e},{serverLink:a,username:t,password:l}){try{const o=await A.A.post(a+"/user/login",{username:t,password:l}),n=o.data;return 0===n.code?(e("setServerLink",a),e("setAuth",!0),e("setToken",n.data.token),!0):n.message}catch(o){return"ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é“¾æ¥æ˜¯å¦æ­£ç¡®ï¼Œåå°æœåŠ¡æ˜¯å¦å¼€å¯"}},logout({commit:e}){e("logout")}},getters:{isAuthenticated:e=>e.isAuthenticated}};const Ql=(0,u.y$)({modules:{user:zl}});var Ml=Ql;const Bl=(0,l.Ef)(w);Bl.use(Ml),Tl.beforeEach((e,a,t)=>{const l=e.meta.requiresAuth;l&&!Ml.state.user.isAuthenticated?t("/login"):t()}),Bl.use(Tl),Bl.mount("#app")}},a={};function t(l){var o=a[l];if(void 0!==o)return o.exports;var n=a[l]={id:l,loaded:!1,exports:{}};return e[l].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}t.m=e,function(){var e=[];t.O=function(a,l,o,n){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],n=e[c][2];for(var u=!0,i=0;i<l.length;i++)(!1&n||r>=n)&&Object.keys(t.O).every(function(e){return t.O[e](l[i])})?l.splice(i--,1):(u=!1,n<r&&(r=n));if(u){e.splice(c--,1);var s=o();void 0!==s&&(a=s)}}return a}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,o,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var o,n,r=l[0],u=l[1],i=l[2],s=0;if(r.some(function(a){return 0!==e[a]})){for(o in u)t.o(u,o)&&(t.m[o]=u[o]);if(i)var c=i(t)}for(a&&a(l);s<r.length;s++)n=r[s],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},l=self["webpackChunkspeak_sphere"]=self["webpackChunkspeak_sphere"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],function(){return t(7535)});l=t.O(l)})();
//# sourceMappingURL=app.75ea5949.js.map